{"version": 1,"name": "cascadedshadows.cgfx","samplers":{"shadowMap":{"MinFilter": 9728,"MagFilter": 9728,"WrapS": 33071,"WrapT": 33071}},"parameters":{"skinBones":{"type": "float","rows": 228,"columns": 4},"world":{"type": "float","rows": 4,"columns": 3},"viewProjectionTranspose":{"type": "float","rows": 4,"columns": 4},"uvScaleOffset":{"type": "float","columns": 4},"pixelOffset":{"type": "float","columns": 2},"shadowMap":{"type": "sampler2D"}},"techniques":{"rigid":[{"parameters": ["world","viewProjectionTranspose"],"semantics": ["ATTR0"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": true,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp","fp"]}],"rigid_nocull":[{"parameters": ["world","viewProjectionTranspose"],"semantics": ["ATTR0"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": true,"CullFaceEnable": false,"BlendEnable": false},"programs": ["vp","fp"]}],"skinned":[{"parameters": ["skinBones","world","viewProjectionTranspose"],"semantics": ["ATTR0","ATTR7","ATTR1"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": true,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_skinned","fp"]}],"skinned_nocull":[{"parameters": ["skinBones","world","viewProjectionTranspose"],"semantics": ["ATTR0","ATTR7","ATTR1"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": true,"CullFaceEnable": false,"BlendEnable": false},"programs": ["vp_skinned","fp"]}],"blur":[{"parameters": ["uvScaleOffset","pixelOffset","shadowMap"],"semantics": ["ATTR0","ATTR8"],"states":{"DepthTestEnable": false,"DepthMask": false,"CullFaceEnable": false,"BlendEnable": false},"programs": ["vp_blur","fp_blur"]}]},"programs":{"fp_blur":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];\nvec4 _ret_0;vec3 _TMP5;float _TMP7;float _TMP3;float _TMP6;float _TMP1;vec2 _c0016;vec2 _c0018;vec2 _c0022;vec2 _c0024;float _TMP25;float _TMP31;float _TMP37;float _TMP43;float _TMP49;float _TMP55;float _TMP61;float _TMP67;float _TMP73;float _TMP79;float _TMP87;float _x0088;float _x0092;float _TMP97;float _x0098;float _x0102;float _TMP107;float _x0108;float _x0112;float _TMP117;float _x0118;float _x0122;vec3 _TMP125;vec3 _enc10126;float _TMP129;vec3 _x0136;uniform vec2 pixelOffset;uniform sampler2D shadowMap;void main()\n{vec4 _sample0;vec4 _sample1;vec4 _sample2;vec4 _sample3;vec4 _sample4;float _alpha;float _accum;_c0016=tz_TexCoord[0].xy-2.0*pixelOffset;_sample0=texture2D(shadowMap,_c0016);_c0018=tz_TexCoord[0].xy-pixelOffset;_sample1=texture2D(shadowMap,_c0018);_sample2=texture2D(shadowMap,tz_TexCoord[0].xy);_c0022=tz_TexCoord[0].xy+pixelOffset;_sample3=texture2D(shadowMap,_c0022);_c0024=tz_TexCoord[0].xy+2.0*pixelOffset;_sample4=texture2D(shadowMap,_c0024);_alpha=(_sample0.w+_sample1.w+_sample2.w+_sample3.w+_sample4.w)*2.00000003E-01;if(_alpha<3.92156886E-03){gl_FragColor=vec4(1.0,1.0,1.0,0.0);return;}\nif(_sample0.w>3.92156886E-03){_TMP1=dot(_sample0.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP7=min(1.0,_TMP1);_TMP31=max(0.0,_TMP7);_TMP25=_TMP31;}else{_TMP25=1.0;}\nif(_sample1.w>3.92156886E-03){_TMP1=dot(_sample1.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP7=min(1.0,_TMP1);_TMP43=max(0.0,_TMP7);_TMP37=_TMP43;}else{_TMP37=1.0;}\nif(_sample2.w>3.92156886E-03){_TMP1=dot(_sample2.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP7=min(1.0,_TMP1);_TMP55=max(0.0,_TMP7);_TMP49=_TMP55;}else{_TMP49=1.0;}\nif(_sample3.w>3.92156886E-03){_TMP1=dot(_sample3.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP7=min(1.0,_TMP1);_TMP67=max(0.0,_TMP7);_TMP61=_TMP67;}else{_TMP61=1.0;}\nif(_sample4.w>3.92156886E-03){_TMP1=dot(_sample4.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP7=min(1.0,_TMP1);_TMP79=max(0.0,_TMP7);_TMP73=_TMP79;}else{_TMP73=1.0;}\n_x0088=_TMP37-_TMP25;_TMP87=pow(2.71828198,_x0088);_x0092=2.00000003E-01+2.00000003E-01*_TMP87;_TMP6=log2(_x0092);_TMP3=_TMP6*6.93147182E-01;_accum=_TMP25+_TMP3;_x0098=_TMP49-_accum;_TMP97=pow(2.71828198,_x0098);_x0102=1.0+2.00000003E-01*_TMP97;_TMP6=log2(_x0102);_TMP3=_TMP6*6.93147182E-01;_accum=_accum+_TMP3;_x0108=_TMP61-_accum;_TMP107=pow(2.71828198,_x0108);_x0112=1.0+2.00000003E-01*_TMP107;_TMP6=log2(_x0112);_TMP3=_TMP6*6.93147182E-01;_accum=_accum+_TMP3;_x0118=_TMP73-_accum;_TMP117=pow(2.71828198,_x0118);_x0122=1.0+2.00000003E-01*_TMP117;_TMP6=log2(_x0122);_TMP3=_TMP6*6.93147182E-01;_accum=_accum+_TMP3;if(_accum>=1.0){_TMP125=vec3(1.0,1.0,1.0);}else{_TMP7=min(1.0,_accum);_TMP129=max(0.0,_TMP7);_x0136=_TMP129*vec3(6.55360000E+04,256.0,1.0);_TMP5=fract(_x0136);_enc10126=_TMP5*256.0;_enc10126.yz=_enc10126.yz-_enc10126.xy/256.0;_TMP125=_enc10126/255.0;}\n_ret_0=vec4(_TMP125.x,_TMP125.y,_TMP125.z,_alpha);gl_FragColor=_ret_0;}"},"vp_blur":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec4 ATTR8;\nvec4 _OUTPosition1;vec2 _OUTUV1;uniform vec4 uvScaleOffset;void main()\n{_OUTPosition1=ATTR0;_OUTUV1=ATTR8.xy*uvScaleOffset.xy+uvScaleOffset.zw;tz_TexCoord[0].xy=_OUTUV1;gl_Position=ATTR0;}"},"fp":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvec4 _ret_0;vec3 _TMP2;float _TMP3;vec3 _TMP11;vec3 _enc10012;float _TMP15;vec3 _x0022;void main()\n{if(gl_FragCoord.z>=1.0){_TMP11=vec3(1.0,1.0,1.0);}else{_TMP3=min(1.0,gl_FragCoord.z);_TMP15=max(0.0,_TMP3);_x0022=_TMP15*vec3(6.55360000E+04,256.0,1.0);_TMP2=fract(_x0022);_enc10012=_TMP2*256.0;_enc10012.yz=_enc10012.yz-_enc10012.xy/256.0;_TMP11=_enc10012/255.0;}\n_ret_0=vec4(_TMP11.x,_TMP11.y,_TMP11.z,1.0);gl_FragColor=_ret_0;}"},"vp_skinned":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nattribute vec4 ATTR0;\nvec4 _OUTPosition1;ivec4 _Indices0009;vec4 _skinMatrix0009[3];attribute vec4 ATTR7;attribute vec4 ATTR1;uniform vec4 skinBones[228];uniform vec3 world[4];uniform vec4 viewProjectionTranspose[4];void main()\n{vec4 _skinTempPosition;vec3 _Position;vec4 _worldPosition;vec3 _TMP6;_Indices0009=ivec4(int((3.0*ATTR7).x),int((3.0*ATTR7).y),int((3.0*ATTR7).z),int((3.0*ATTR7).w));_skinMatrix0009[0]=ATTR1.x*skinBones[_Indices0009.x];_skinMatrix0009[1]=ATTR1.x*skinBones[(_Indices0009.x+1)];_skinMatrix0009[2]=ATTR1.x*skinBones[(_Indices0009.x+2)];_skinMatrix0009[0]=_skinMatrix0009[0]+ATTR1.y*skinBones[_Indices0009.y];_skinMatrix0009[1]=_skinMatrix0009[1]+ATTR1.y*skinBones[(_Indices0009.y+1)];_skinMatrix0009[2]=_skinMatrix0009[2]+ATTR1.y*skinBones[(_Indices0009.y+2)];_skinMatrix0009[0]=_skinMatrix0009[0]+ATTR1.z*skinBones[_Indices0009.z];_skinMatrix0009[1]=_skinMatrix0009[1]+ATTR1.z*skinBones[(_Indices0009.z+1)];_skinMatrix0009[2]=_skinMatrix0009[2]+ATTR1.z*skinBones[(_Indices0009.z+2)];_skinMatrix0009[0]=_skinMatrix0009[0]+ATTR1.w*skinBones[_Indices0009.w];_skinMatrix0009[1]=_skinMatrix0009[1]+ATTR1.w*skinBones[(_Indices0009.w+1)];_skinMatrix0009[2]=_skinMatrix0009[2]+ATTR1.w*skinBones[(_Indices0009.w+2)];_skinTempPosition=vec4(ATTR0.x,ATTR0.y,ATTR0.z,1.0);_Position.x=dot(_skinTempPosition,_skinMatrix0009[0]);_Position.y=dot(_skinTempPosition,_skinMatrix0009[1]);_Position.z=dot(_skinTempPosition,_skinMatrix0009[2]);_TMP6=_Position.x*world[0]+_Position.y*world[1]+_Position.z*world[2]+world[3];_worldPosition=vec4(_TMP6.x,_TMP6.y,_TMP6.z,1.0);_OUTPosition1.x=dot(_worldPosition,viewProjectionTranspose[0]);_OUTPosition1.y=dot(_worldPosition,viewProjectionTranspose[1]);_OUTPosition1.z=dot(_worldPosition,viewProjectionTranspose[2]);_OUTPosition1.w=dot(_worldPosition,viewProjectionTranspose[3]);gl_Position=_OUTPosition1;}"},"vp":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nattribute vec4 ATTR0;\nvec4 _OUTPosition1;uniform vec3 world[4];uniform vec4 viewProjectionTranspose[4];void main()\n{vec4 _worldPosition;vec3 _TMP6;_TMP6=ATTR0.x*world[0]+ATTR0.y*world[1]+ATTR0.z*world[2]+world[3];_worldPosition=vec4(_TMP6.x,_TMP6.y,_TMP6.z,1.0);_OUTPosition1.x=dot(_worldPosition,viewProjectionTranspose[0]);_OUTPosition1.y=dot(_worldPosition,viewProjectionTranspose[1]);_OUTPosition1.z=dot(_worldPosition,viewProjectionTranspose[2]);_OUTPosition1.w=dot(_worldPosition,viewProjectionTranspose[3]);gl_Position=_OUTPosition1;}"}}}