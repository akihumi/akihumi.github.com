{"version": 1,"name": "clouds.cgfx","samplers":{"diffuse":{"MinFilter": 9985,"MagFilter": 9729,"WrapS": 33071,"WrapT": 33071},"gradientDiffuse":{"MinFilter": 9985,"MagFilter": 9729,"WrapS": 10497,"WrapT": 10497},"distantGradientDiffuse":{"MinFilter": 9985,"MagFilter": 9729,"WrapS": 10497,"WrapT": 10497},"imposter":{"MinFilter": 9728,"MagFilter": 9729,"WrapS": 33071,"WrapT": 33071}},"parameters":{"elementUVRectangle":{"type": "float","rows": 8,"columns": 4},"elementBaseAlpha":{"type": "float","rows": 8},"cloudCenterOffset":{"type": "float","columns": 3},"cloudHalfExtents":{"type": "float","columns": 3},"clusterCenterOffset":{"type": "float","rows": 8,"columns": 3},"clusterHalfExtents":{"type": "float","rows": 8,"columns": 3},"cloudDistance":{"type": "float"},"diffuse":{"type": "sampler2D"},"gradientDiffuse":{"type": "sampler2D"},"distantGradientDiffuse":{"type": "sampler2D"},"cameraPosition":{"type": "float","columns": 3},"cloudPosition":{"type": "float","columns": 3},"billboardDirection":{"type": "float","columns": 3},"imposterUVRect":{"type": "float","columns": 4},"imposter":{"type": "sampler2D"},"imposterOffset":{"type": "float","columns": 3},"viewProjection":{"type": "float","rows": 4,"columns": 4},"quadVertex":{"type": "float","rows": 4,"columns": 2,"values": [-1,-1,1,-1,1,1,-1,1]},"quadUV":{"type": "float","rows": 4,"columns": 2,"values": [0,1,1,1,1,0,0,0]}},"techniques":{"clouds":[{"parameters": ["elementUVRectangle","elementBaseAlpha","cloudHalfExtents","clusterCenterOffset","clusterHalfExtents","cloudPosition","billboardDirection","viewProjection","quadVertex","quadUV","cloudDistance","diffuse","gradientDiffuse","distantGradientDiffuse","cameraPosition","billboardDirection"],"semantics": ["ATTR0","ATTR3","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": false,"BlendEnable": true,"BlendFunc": [1,771]},"programs": ["vp_clouds","fp_clouds"]}],"clouds_far":[{"parameters": ["elementUVRectangle","elementBaseAlpha","cloudHalfExtents","clusterCenterOffset","clusterHalfExtents","cloudPosition","billboardDirection","viewProjection","quadVertex","quadUV","cloudDistance","diffuse","gradientDiffuse","distantGradientDiffuse","cameraPosition","billboardDirection"],"semantics": ["ATTR0","ATTR3","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": false,"BlendEnable": true,"BlendFunc": [1,771]},"programs": ["vp_far_clouds","fp_clouds"]}],"clouds_imposter":[{"parameters": ["imposterUVRect","imposterOffset","viewProjection","imposter"],"semantics": ["ATTR0","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": false,"ColorMask": [1,1,1,0],"BlendEnable": true,"BlendFunc": [1,771]},"programs": ["vp_clouds_imposter","fp_clouds_imposter"]}],"clouds_far_imposter":[{"parameters": ["imposterUVRect","imposterOffset","viewProjection","imposter"],"semantics": ["ATTR0","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": false,"ColorMask": [1,1,1,0],"BlendEnable": true,"BlendFunc": [1,771]},"programs": ["vp_clouds_far_imposter","fp_clouds_imposter"]}]},"programs":{"fp_clouds_imposter":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];\nuniform sampler2D imposter;void main()\n{vec4 _color;_color=texture2D(imposter,tz_TexCoord[0].xy);if(_color.w<4.00000019E-03){discard;}\ngl_FragColor=_color;}"},"vp_clouds_far_imposter":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec4 ATTR8;\nvec4 _OutPosition1;vec2 _OutUV1;vec4 _r0021;vec4 _v0021;uniform vec4 imposterUVRect;uniform vec3 imposterOffset;uniform vec4 viewProjection[4];void main()\n{vec3 _TMP19;_TMP19=ATTR0.xyz+imposterOffset;_v0021=vec4(_TMP19.x,_TMP19.y,_TMP19.z,1.0);_r0021=_v0021.x*viewProjection[0];_r0021=_r0021+_v0021.y*viewProjection[1];_r0021=_r0021+_v0021.z*viewProjection[2];_r0021=_r0021+_v0021.w*viewProjection[3];_OutPosition1=_r0021;_OutUV1=imposterUVRect.xy+ATTR8.xy*imposterUVRect.zw;_OutPosition1.z=_r0021.w;tz_TexCoord[0].xy=_OutUV1;gl_Position=_OutPosition1;}"},"vp_clouds_imposter":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec4 ATTR8;\nvec4 _OutPosition1;vec2 _OutUV1;vec4 _r0021;vec4 _v0021;uniform vec4 imposterUVRect;uniform vec3 imposterOffset;uniform vec4 viewProjection[4];void main()\n{vec3 _TMP19;_TMP19=ATTR0.xyz+imposterOffset;_v0021=vec4(_TMP19.x,_TMP19.y,_TMP19.z,1.0);_r0021=_v0021.x*viewProjection[0];_r0021=_r0021+_v0021.y*viewProjection[1];_r0021=_r0021+_v0021.z*viewProjection[2];_r0021=_r0021+_v0021.w*viewProjection[3];_OutPosition1=_r0021;_OutUV1=imposterUVRect.xy+ATTR8.xy*imposterUVRect.zw;tz_TexCoord[0].xy=_OutUV1;gl_Position=_r0021;}"},"fp_clouds":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[4];\nvec4 _ret_0;float _alpha1;vec3 _TMP13;vec4 _TMP12;vec4 _TMP11;vec4 _TMP10;vec4 _TMP9;float _TMP8;float _TMP14;float _TMP7;vec4 _TMP2;vec4 _TMP1;vec4 _TMP0;vec2 _c0038;vec2 _c0040;float _x0042;float _TMP43;float _x0050;float _TMP51;float _x0058;float _TMP59;float _x0066;float _TMP67;vec3 _b0074;float _x0076;float _TMP77;float _x0086;float _TMP87;vec2 _c0094;vec2 _c0096;vec2 _c0100;vec2 _c0102;uniform float cloudDistance;uniform sampler2D diffuse;uniform sampler2D gradientDiffuse;uniform sampler2D distantGradientDiffuse;uniform vec3 cameraPosition;uniform vec3 billboardDirection;void main()\n{float _basey;float _py;float _v1;float _v2;float _fade;vec3 _modulate1;vec3 _modulate2;vec3 _TMP34;_TMP0=texture2D(diffuse,tz_TexCoord[0].xy);_c0038=tz_TexCoord[0].xy*2.50000000E-01;_TMP1=texture2D(diffuse,_c0038);_c0040=tz_TexCoord[0].xy*1.25;_TMP2=texture2D(diffuse,_c0040);_basey=tz_TexCoord[2].y+32.0*(_TMP0.y-0.5);_py=_basey-32.0*(_TMP1.y-0.5);_x0042=(_py-tz_TexCoord[1].x)*tz_TexCoord[1].y;_TMP14=min(1.0,_x0042);_TMP43=max(0.0,_TMP14);_x0050=(_py-tz_TexCoord[1].z)*tz_TexCoord[1].w;_TMP14=min(1.0,_x0050);_TMP51=max(0.0,_TMP14);_v1=3.49999994E-01*_TMP43+6.49999976E-01*_TMP51;_py=_basey-32.0*(_TMP2.y-0.5);_x0058=(_py-tz_TexCoord[1].x)*tz_TexCoord[1].y;_TMP14=min(1.0,_x0058);_TMP59=max(0.0,_TMP14);_x0066=(_py-tz_TexCoord[1].z)*tz_TexCoord[1].w;_TMP14=min(1.0,_x0066);_TMP67=max(0.0,_TMP14);_v2=3.49999994E-01*_TMP59+6.49999976E-01*_TMP67;_b0074=tz_TexCoord[2].xyz-cameraPosition;_TMP7=dot(billboardDirection,_b0074);_x0076=_TMP7*1.99999996E-02;_TMP14=min(1.0,_x0076);_TMP77=max(0.0,_TMP14);_x0086=_py/128.0;_TMP14=min(1.0,_x0086);_TMP87=max(0.0,_TMP14);_TMP8=_TMP87*_TMP87*(3.0-2.0*_TMP87);_fade=_TMP77*_TMP8;_alpha1=tz_TexCoord[3].x*_TMP0.y*_TMP0.y*_fade;if(_alpha1<4.00000019E-03){discard;}\n_c0094=vec2(_v1,tz_TexCoord[0].x);_TMP9=texture2D(distantGradientDiffuse,_c0094);_c0096=vec2(_v1,tz_TexCoord[0].x);_TMP10=texture2D(gradientDiffuse,_c0096);_modulate1=_TMP9.xyz+cloudDistance*(_TMP10.xyz-_TMP9.xyz);_c0100=vec2(_v2,tz_TexCoord[0].x);_TMP11=texture2D(distantGradientDiffuse,_c0100);_c0102=vec2(_v2,tz_TexCoord[0].x);_TMP12=texture2D(gradientDiffuse,_c0102);_modulate2=_TMP11.xyz+cloudDistance*(_TMP12.xyz-_TMP11.xyz);_TMP13=_modulate1+2.00000003E-01*(_modulate2-_modulate1);_TMP34=_TMP13*_alpha1;_ret_0=vec4(_TMP34.x,_TMP34.y,_TMP34.z,_alpha1);gl_FragColor=_ret_0;}"},"vp_far_clouds":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[4];attribute vec4 ATTR0;attribute vec4 ATTR3;attribute vec4 ATTR8;\nvec4 _OutPosition1;vec4 _OutGradient1;float _OutAlpha1;vec2 _OutUV1;vec3 _OutPositionCopy1;vec3 _TMP0;float _TMP2;float _TMP1;vec3 _v0025;vec3 _r0035;vec3 _r0043;vec4 _r0051;vec4 _v0051;uniform vec4 elementUVRectangle[8];uniform float elementBaseAlpha[8];uniform vec3 cloudHalfExtents;uniform vec3 clusterCenterOffset[8];uniform vec3 clusterHalfExtents[8];uniform vec3 cloudPosition;uniform vec3 billboardDirection;uniform vec4 viewProjection[4];uniform vec2 quadVertex[4];uniform vec2 quadUV[4];void main()\n{vec2 _vertex2D;vec2 _vertexUV;vec3 _clusterCenter;vec3 _clusterExtents;vec4 _uvRectangle;float _baseAlpha;vec3 _spritePosition;vec3 _billboardUp;vec3 _billboardRight;float _sValue;float _cValue;float _tValue;vec3 _t;vec3 _s;vec3 _vertexPosition;vec3 _TMP23[3];_vertex2D=quadVertex[(int(ATTR8.x))];_vertexUV=quadUV[(int(ATTR8.x))];_clusterCenter=clusterCenterOffset[(int(ATTR8.y))];_clusterExtents=clusterHalfExtents[(int(ATTR8.y))];_uvRectangle=elementUVRectangle[(int(ATTR8.z))];_baseAlpha=elementBaseAlpha[(int(ATTR8.z))];_spritePosition=cloudPosition+ATTR0.xyz;_billboardUp=vec3(0.0,1.0,0.0)*ATTR3.x*0.5;_v0025=vec3(-billboardDirection.z,0.0,billboardDirection.x);_TMP1=dot(_v0025,_v0025);_TMP2=inversesqrt(_TMP1);_TMP0=_TMP2*_v0025;_billboardRight=_TMP0*ATTR3.x*0.5;_sValue=sin(ATTR0.w);_cValue=cos(ATTR0.w);_tValue=1.0-_cValue;_t=_tValue*billboardDirection;_s=_sValue*billboardDirection;_TMP23[0]=_t.x*billboardDirection+vec3(_cValue,-_s.z,_s.y);_TMP23[1]=_t.y*billboardDirection+vec3(_s.z,_cValue,-_s.x);_TMP23[2]=_t.z*billboardDirection+vec3(-_s.y,_s.x,_cValue);_r0035.x=dot(_TMP23[0],_billboardUp);_r0035.y=dot(_TMP23[1],_billboardUp);_r0035.z=dot(_TMP23[2],_billboardUp);_r0043.x=dot(_TMP23[0],_billboardRight);_r0043.y=dot(_TMP23[1],_billboardRight);_r0043.z=dot(_TMP23[2],_billboardRight);_vertexPosition=_spritePosition+_vertex2D.x*_r0043+_vertex2D.y*_r0035;_v0051=vec4(_vertexPosition.x,_vertexPosition.y,_vertexPosition.z,1.0);_r0051=_v0051.x*viewProjection[0];_r0051=_r0051+_v0051.y*viewProjection[1];_r0051=_r0051+_v0051.z*viewProjection[2];_r0051=_r0051+_v0051.w*viewProjection[3];_OutPosition1=_r0051;_OutUV1=_uvRectangle.xy+(_uvRectangle.zw-_uvRectangle.xy)*_vertexUV;_OutAlpha1=_baseAlpha;_OutGradient1=vec4(cloudPosition.y-cloudHalfExtents.y,0.5/cloudHalfExtents.y,(cloudPosition.y+_clusterCenter.y)-_clusterExtents.y,0.5/_clusterExtents.y);_OutPositionCopy1=_vertexPosition;_OutPosition1.z=_r0051.w;tz_TexCoord[2].xyz=_vertexPosition;tz_TexCoord[0].xy=_OutUV1;tz_TexCoord[3].x=_baseAlpha;tz_TexCoord[1]=_OutGradient1;gl_Position=_OutPosition1;}"},"vp_clouds":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[4];attribute vec4 ATTR0;attribute vec4 ATTR3;attribute vec4 ATTR8;\nvec4 _OutPosition1;vec4 _OutGradient1;float _OutAlpha1;vec2 _OutUV1;vec3 _OutPositionCopy1;vec3 _TMP2;vec3 _TMP1;float _TMP4;float _TMP3;vec3 _TMP0;vec3 _v0027;vec3 _r0045;vec3 _r0053;vec4 _r0061;vec4 _v0061;uniform vec4 elementUVRectangle[8];uniform float elementBaseAlpha[8];uniform vec3 cloudHalfExtents;uniform vec3 clusterCenterOffset[8];uniform vec3 clusterHalfExtents[8];uniform vec3 cloudPosition;uniform vec3 billboardDirection;uniform vec4 viewProjection[4];uniform vec2 quadVertex[4];uniform vec2 quadUV[4];void main()\n{vec2 _vertex2D;vec2 _vertexUV;vec3 _clusterCenter;vec3 _clusterExtents;vec4 _uvRectangle;float _baseAlpha;vec3 _spritePosition;vec3 _billboardRight;vec3 _billboardUp;float _sValue;float _cValue;float _tValue;vec3 _t;vec3 _s;vec3 _vertexPosition;vec3 _TMP25[3];_vertex2D=quadVertex[(int(ATTR8.x))];_vertexUV=quadUV[(int(ATTR8.x))];_clusterCenter=clusterCenterOffset[(int(ATTR8.y))];_clusterExtents=clusterHalfExtents[(int(ATTR8.y))];_uvRectangle=elementUVRectangle[(int(ATTR8.z))];_baseAlpha=elementBaseAlpha[(int(ATTR8.z))];_spritePosition=cloudPosition+ATTR0.xyz;_v0027=vec3(-billboardDirection.z,0.0,billboardDirection.x);_TMP3=dot(_v0027,_v0027);_TMP4=inversesqrt(_TMP3);_TMP0=_TMP4*_v0027;_billboardRight=_TMP0*ATTR3.x*0.5;_TMP1=_billboardRight.yzx*billboardDirection.zxy-_billboardRight.zxy*billboardDirection.yzx;_TMP3=dot(_TMP1,_TMP1);_TMP4=inversesqrt(_TMP3);_TMP2=_TMP4*_TMP1;_billboardUp=_TMP2*ATTR3.x*0.5;_sValue=sin(ATTR0.w);_cValue=cos(ATTR0.w);_tValue=1.0-_cValue;_t=_tValue*billboardDirection;_s=_sValue*billboardDirection;_TMP25[0]=_t.x*billboardDirection+vec3(_cValue,-_s.z,_s.y);_TMP25[1]=_t.y*billboardDirection+vec3(_s.z,_cValue,-_s.x);_TMP25[2]=_t.z*billboardDirection+vec3(-_s.y,_s.x,_cValue);_r0045.x=dot(_TMP25[0],_billboardUp);_r0045.y=dot(_TMP25[1],_billboardUp);_r0045.z=dot(_TMP25[2],_billboardUp);_r0053.x=dot(_TMP25[0],_billboardRight);_r0053.y=dot(_TMP25[1],_billboardRight);_r0053.z=dot(_TMP25[2],_billboardRight);_vertexPosition=_spritePosition+_vertex2D.x*_r0053+_vertex2D.y*_r0045;_v0061=vec4(_vertexPosition.x,_vertexPosition.y,_vertexPosition.z,1.0);_r0061=_v0061.x*viewProjection[0];_r0061=_r0061+_v0061.y*viewProjection[1];_r0061=_r0061+_v0061.z*viewProjection[2];_r0061=_r0061+_v0061.w*viewProjection[3];_OutPosition1=_r0061;_OutUV1=_uvRectangle.xy+(_uvRectangle.zw-_uvRectangle.xy)*_vertexUV;_OutAlpha1=_baseAlpha;_OutGradient1=vec4(cloudPosition.y-cloudHalfExtents.y,0.5/cloudHalfExtents.y,(cloudPosition.y+_clusterCenter.y)-_clusterExtents.y,0.5/_clusterExtents.y);_OutPositionCopy1=_vertexPosition;tz_TexCoord[2].xyz=_vertexPosition;tz_TexCoord[0].xy=_OutUV1;tz_TexCoord[3].x=_baseAlpha;tz_TexCoord[1]=_OutGradient1;gl_Position=_r0061;}"}}}