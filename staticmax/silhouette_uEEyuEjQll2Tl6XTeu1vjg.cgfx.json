{"version": 1,"name": "silhouette.cgfx","samplers":{"silhouetteTexture":{"MinFilter": 9728,"MagFilter": 9728,"WrapS": 33071,"WrapT": 33071},"colorTexture":{"MinFilter": 9728,"MagFilter": 9728,"WrapS": 33071,"WrapT": 33071},"shadowMapTexture":{"MinFilter": 9729,"MagFilter": 9729,"WrapS": 33071,"WrapT": 33071}},"parameters":{"skinBones":{"type": "float","rows": 228,"columns": 4},"uvTransform":{"type": "float","rows": 3,"columns": 2,"values": [1,0,0,1,0,0]},"projection":{"type": "float","rows": 4,"columns": 4},"worldView":{"type": "float","rows": 4,"columns": 3},"worldViewInverseTranspose":{"type": "float","rows": 3,"columns": 3},"viewDepth":{"type": "float","columns": 2},"time":{"type": "float"},"pixelOffset":{"type": "float","columns": 2},"silhouetteTexture":{"type": "sampler2D"},"colorTexture":{"type": "sampler2D"},"shadowMapTexture":{"type": "sampler2D"}},"techniques":{"rigid":[{"parameters": ["projection","worldView","worldViewInverseTranspose","viewDepth"],"semantics": ["ATTR0","ATTR2"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": true,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp","fp_opaque"]}],"skinned":[{"parameters": ["skinBones","projection","worldView","worldViewInverseTranspose","viewDepth"],"semantics": ["ATTR0","ATTR2","ATTR7","ATTR1"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": true,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_skinned","fp_opaque"]}],"rigid_nocull":[{"parameters": ["projection","worldView","worldViewInverseTranspose","viewDepth"],"semantics": ["ATTR0","ATTR2"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": true,"CullFaceEnable": false,"BlendEnable": false},"programs": ["vp","fp_opaque"]}],"skinned_nocull":[{"parameters": ["skinBones","projection","worldView","worldViewInverseTranspose","viewDepth"],"semantics": ["ATTR0","ATTR2","ATTR7","ATTR1"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": true,"CullFaceEnable": false,"BlendEnable": false},"programs": ["vp_skinned","fp_opaque"]}],"bird":[{"parameters": ["projection","worldView","worldViewInverseTranspose","viewDepth","time"],"semantics": ["ATTR0","ATTR2"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": true,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_bird","fp_opaque"]}],"mix":[{"parameters": ["pixelOffset","silhouetteTexture","colorTexture"],"semantics": ["ATTR0","ATTR8"],"states":{"DepthTestEnable": false,"DepthMask": false,"CullFaceEnable": false,"BlendEnable": false},"programs": ["vp_mix","fp_mix"]}]},"programs":{"fp_mix":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];\nvec4 _ret_0;float _TMP3;float _TMP2;float _TMP1;float _TMP0;float _TMP4;vec2 _fenc0028;float _f0028;float _g0028;vec3 _normal0028;float _a0032;vec2 _fenc0038;float _f0038;float _g0038;vec3 _normal0038;float _a0042;vec2 _fenc0048;float _f0048;float _g0048;vec3 _normal0048;float _a0052;float _a0056;float _a0058;float _x0060;uniform vec2 pixelOffset;uniform sampler2D silhouetteTexture;uniform sampler2D colorTexture;void main()\n{vec4 _color;vec2 _uvR;vec2 _uvB;vec4 _normalDepth;vec4 _normalDepthR;vec4 _normalDepthB;float _z;float _zR;float _zB;float _zdR;float _zdB;float _zDiff;float _angleDiff;float _borderFactor;vec4 _backColorR1;vec4 _backColorB1;_color=texture2D(colorTexture,tz_TexCoord[0].xy);_uvR=vec2(tz_TexCoord[0].x+pixelOffset.x,tz_TexCoord[0].y);_uvB=vec2(tz_TexCoord[0].x,tz_TexCoord[0].y+pixelOffset.y);_normalDepth=texture2D(silhouetteTexture,tz_TexCoord[0].xy);_normalDepthR=texture2D(silhouetteTexture,_uvR);_normalDepthB=texture2D(silhouetteTexture,_uvB);_z=_normalDepth.z*9.96108949E-01+_normalDepth.w*3.89105058E-03;_fenc0028=_normalDepth.xy*4.0-2.0;_f0028=dot(_fenc0028,_fenc0028);_a0032=1.0-_f0028/4.0;_TMP4=inversesqrt(_a0032);_g0028=1.0/_TMP4;_normal0028.xy=_fenc0028*_g0028;_normal0028.z=1.0-_f0028/2.0;_zR=_normalDepthR.z*9.96108949E-01+_normalDepthR.w*3.89105058E-03;_fenc0038=_normalDepthR.xy*4.0-2.0;_f0038=dot(_fenc0038,_fenc0038);_a0042=1.0-_f0038/4.0;_TMP4=inversesqrt(_a0042);_g0038=1.0/_TMP4;_normal0038.xy=_fenc0038*_g0038;_normal0038.z=1.0-_f0038/2.0;_zB=_normalDepthB.z*9.96108949E-01+_normalDepthB.w*3.89105058E-03;_fenc0048=_normalDepthB.xy*4.0-2.0;_f0048=dot(_fenc0048,_fenc0048);_a0052=1.0-_f0048/4.0;_TMP4=inversesqrt(_a0052);_g0048=1.0/_TMP4;_normal0048.xy=_fenc0048*_g0048;_normal0048.z=1.0-_f0048/2.0;_a0056=_zR-_z;_TMP0=abs(_a0056);_zdR=1.0-_TMP0;_a0058=_zB-_z;_TMP1=abs(_a0058);_zdB=1.0-_TMP1;_x0060=_zdB*_zdB*_zdR*_zdR;_zDiff=pow(_x0060,8.0);if(_zDiff>7.50000000E-01){_zDiff=1.0;}\n_TMP2=dot(_normal0038,_normal0028);_TMP3=dot(_normal0048,_normal0028);_angleDiff=0.5*(_TMP2+_TMP3);_angleDiff=_angleDiff*_angleDiff;_borderFactor=min(_zDiff,_angleDiff);if(_color.w<8.00000012E-01){if(_borderFactor<0.5){_backColorR1=texture2D(colorTexture,_uvR);_backColorB1=texture2D(colorTexture,_uvB);_color.xyz=(_color.xyz+_backColorR1.xyz*float((_backColorR1.w<8.00000012E-01))+_backColorB1.xyz*float((_backColorB1.w<8.00000012E-01)))*3.33333343E-01;}}else{_color.xyz=_color.xyz*vec3(_borderFactor,_borderFactor,_borderFactor);}\n_ret_0=vec4(_color.x,_color.y,_color.z,1.0);gl_FragColor=_ret_0;}"},"vp_mix":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec4 ATTR8;\nvec4 _OUTPosition1;vec2 _OUTUV1;void main()\n{_OUTPosition1=ATTR0;_OUTUV1=ATTR8.xy;tz_TexCoord[0].xy=ATTR8.xy;gl_Position=ATTR0;}"},"fp_opaque":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];\nvec4 _ret_0;vec2 _TMP1;vec2 _TMP0;float _TMP5;float _TMP4;float _TMP3;vec3 _normal0020;float _invp0020;float _x0028;float _d0030;float _dH0030;float _dL0030;float _TMP33;float _x0040;void main()\n{_TMP3=dot(tz_TexCoord[0].xyz,tz_TexCoord[0].xyz);_TMP4=inversesqrt(_TMP3);_normal0020=_TMP4*tz_TexCoord[0].xyz;_x0028=_normal0020.z*8.0+8.0;_invp0020=inversesqrt(_x0028);_TMP0=_normal0020.xy*_invp0020+0.5;_TMP5=min(1.0,tz_TexCoord[0].w);_TMP33=max(0.0,_TMP5);_d0030=_TMP33*6.55350000E+04;_x0040=_d0030*3.90625000E-03;_dH0030=floor(_x0040);_dL0030=_d0030-_dH0030*256.0;_TMP1=vec2(_dH0030*3.92156886E-03,_dL0030*3.92156886E-03);_ret_0=vec4(_TMP0.x,_TMP0.y,_TMP1.x,_TMP1.y);gl_FragColor=_ret_0;}"},"vp_bird":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec3 ATTR2;\nvec4 _OUTPosition1;vec4 _OUTNormalDepth1;vec3 _TMP1;float _TMP0;uniform vec4 projection[4];uniform vec3 worldView[4];uniform vec3 worldViewInverseTranspose[3];uniform vec2 viewDepth;uniform float time;void main()\n{vec3 _position;vec3 _viewPosition;_TMP0=abs(ATTR0.x);_position=vec3(ATTR0.x,ATTR0.y+4.0*time*_TMP0,ATTR0.z);_viewPosition=_position.xxx*worldView[0]+_position.yyy*worldView[1]+_position.zzz*worldView[2]+worldView[3];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];_TMP1=ATTR2.xxx*worldViewInverseTranspose[0]+ATTR2.yyy*worldViewInverseTranspose[1]+ATTR2.zzz*worldViewInverseTranspose[2];_OUTNormalDepth1=vec4(_TMP1.x,_TMP1.y,_TMP1.z,_viewPosition.z*viewDepth.x+viewDepth.y);tz_TexCoord[0]=_OUTNormalDepth1;gl_Position=_OUTPosition1;}"},"vp_skinned":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec3 ATTR2;\nvec4 _OUTPosition1;vec4 _OUTNormalDepth1;vec3 _TMP0;float _TMP2;float _TMP1;ivec4 _Indices0016;vec4 _skinVectorX0016;vec4 _skinVectorY0016;vec4 _skinVectorZ0016;attribute vec4 ATTR7;attribute vec4 ATTR1;uniform vec4 skinBones[228];uniform vec4 projection[4];uniform vec3 worldView[4];uniform vec3 worldViewInverseTranspose[3];uniform vec2 viewDepth;void main()\n{vec4 _skinTempPosition;vec3 _localPosition;vec3 _localNormal;vec3 _viewPosition;_Indices0016=ivec4(int((3.0*ATTR7).x),int((3.0*ATTR7).y),int((3.0*ATTR7).z),int((3.0*ATTR7).w));_skinVectorX0016=ATTR1.x*skinBones[_Indices0016.x];_skinVectorY0016=ATTR1.x*skinBones[(_Indices0016.x+1)];_skinVectorZ0016=ATTR1.x*skinBones[(_Indices0016.x+2)];_skinVectorX0016=_skinVectorX0016+ATTR1.y*skinBones[_Indices0016.y];_skinVectorY0016=_skinVectorY0016+ATTR1.y*skinBones[(_Indices0016.y+1)];_skinVectorZ0016=_skinVectorZ0016+ATTR1.y*skinBones[(_Indices0016.y+2)];_skinVectorX0016=_skinVectorX0016+ATTR1.z*skinBones[_Indices0016.z];_skinVectorY0016=_skinVectorY0016+ATTR1.z*skinBones[(_Indices0016.z+1)];_skinVectorZ0016=_skinVectorZ0016+ATTR1.z*skinBones[(_Indices0016.z+2)];_skinVectorX0016=_skinVectorX0016+ATTR1.w*skinBones[_Indices0016.w];_skinVectorY0016=_skinVectorY0016+ATTR1.w*skinBones[(_Indices0016.w+1)];_skinVectorZ0016=_skinVectorZ0016+ATTR1.w*skinBones[(_Indices0016.w+2)];_skinTempPosition=vec4(ATTR0.x,ATTR0.y,ATTR0.z,1.0);_localPosition.x=dot(_skinTempPosition,_skinVectorX0016);_localPosition.y=dot(_skinTempPosition,_skinVectorY0016);_localPosition.z=dot(_skinTempPosition,_skinVectorZ0016);_localNormal.x=dot(ATTR2,_skinVectorX0016.xyz);_localNormal.y=dot(ATTR2,_skinVectorY0016.xyz);_localNormal.z=dot(ATTR2,_skinVectorZ0016.xyz);_TMP1=dot(_localNormal,_localNormal);_TMP2=inversesqrt(_TMP1);_localNormal=_TMP2*_localNormal;_viewPosition=_localPosition.xxx*worldView[0]+_localPosition.yyy*worldView[1]+_localPosition.zzz*worldView[2]+worldView[3];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];_TMP0=_localNormal.xxx*worldViewInverseTranspose[0]+_localNormal.yyy*worldViewInverseTranspose[1]+_localNormal.zzz*worldViewInverseTranspose[2];_OUTNormalDepth1=vec4(_TMP0.x,_TMP0.y,_TMP0.z,_viewPosition.z*viewDepth.x+viewDepth.y);tz_TexCoord[0]=_OUTNormalDepth1;gl_Position=_OUTPosition1;}"},"vp":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec3 ATTR2;\nvec4 _OUTPosition1;vec4 _OUTNormalDepth1;vec3 _TMP0;uniform vec4 projection[4];uniform vec3 worldView[4];uniform vec3 worldViewInverseTranspose[3];uniform vec2 viewDepth;void main()\n{vec3 _viewPosition;_viewPosition=ATTR0.xxx*worldView[0]+ATTR0.yyy*worldView[1]+ATTR0.zzz*worldView[2]+worldView[3];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];_TMP0=ATTR2.xxx*worldViewInverseTranspose[0]+ATTR2.yyy*worldViewInverseTranspose[1]+ATTR2.zzz*worldViewInverseTranspose[2];_OUTNormalDepth1=vec4(_TMP0.x,_TMP0.y,_TMP0.z,_viewPosition.z*viewDepth.x+viewDepth.y);tz_TexCoord[0]=_OUTNormalDepth1;gl_Position=_OUTPosition1;}"}}}