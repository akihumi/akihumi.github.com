{"version": 1,"name": "cartoonrendering.cgfx","samplers":{"shadowMapTexture":{"MinFilter": 9729,"MagFilter": 9729,"WrapS": 33071,"WrapT": 33071},"diffuse":{"MinFilter": 9985,"MagFilter": 9729,"WrapS": 10497,"WrapT": 10497,"MaxAnisotropy": 16},"glow_map":{"MinFilter": 9985,"MagFilter": 9729,"WrapS": 10497,"WrapT": 10497},"alpha_map":{"MinFilter": 9985,"MagFilter": 9729,"WrapS": 10497,"WrapT": 10497,"MaxAnisotropy": 16},"env_map":{"MinFilter": 9985,"MagFilter": 9729,"WrapS": 33071,"WrapT": 33071,"WrapR": 33071},"light_map":{"MinFilter": 9985,"MagFilter": 9729,"WrapS": 33071,"WrapT": 33071},"colorTexture":{"MinFilter": 9728,"MagFilter": 9728,"WrapS": 33071,"WrapT": 33071}},"parameters":{"skinBones":{"type": "float","rows": 228,"columns": 4},"uvTransform":{"type": "float","rows": 3,"columns": 2,"values": [1,0,0,1,0,0]},"viewShadowProjection0":{"type": "float","rows": 3,"columns": 4},"shadowOffset0":{"type": "float","columns": 2},"viewShadowProjection1":{"type": "float","rows": 3,"columns": 4},"shadowOffset1":{"type": "float","columns": 2},"viewShadowProjection2":{"type": "float","rows": 3,"columns": 4},"shadowOffset2":{"type": "float","columns": 2},"viewShadowProjection3":{"type": "float","rows": 3,"columns": 4},"shadowOffset3":{"type": "float","columns": 2},"invShadowSize":{"type": "float"},"shadowMapTexture":{"type": "sampler2D"},"projection":{"type": "float","rows": 4,"columns": 4},"worldView":{"type": "float","rows": 4,"columns": 3},"worldViewInverseTranspose":{"type": "float","rows": 3,"columns": 3},"viewInverseTranspose":{"type": "float","rows": 3,"columns": 4},"lightDirection":{"type": "float","columns": 3},"lightColor":{"type": "float","columns": 3},"ambientColor":{"type": "float","columns": 3},"fogColor":{"type": "float","columns": 3},"invCameraFar":{"type": "float"},"materialColor":{"type": "float","columns": 4,"values": [1,1,1,1]},"alphaRef":{"type": "float","values": [0.5]},"lightingScale":{"type": "float","values": [2]},"worldMinMaxY":{"type": "float","columns": 2,"values": [0,1]},"time":{"type": "float"},"foregroundAlbedoScale":{"type": "float","columns": 3,"values": [1,0.7,0.6]},"foreground":{"type": "bool"},"diffuse":{"type": "sampler2D"},"glow_map":{"type": "sampler2D"},"alpha_map":{"type": "sampler2D"},"env_map":{"type": "samplerCUBE"},"light_map":{"type": "sampler2D"},"colorTexture":{"type": "sampler2D"}},"techniques":{"flat":[{"name": "p0","parameters": ["projection","worldView","worldViewInverseTranspose","viewShadowProjection0","shadowOffset0","viewShadowProjection1","shadowOffset1","viewShadowProjection2","shadowOffset2","viewShadowProjection3","shadowOffset3","invShadowSize","shadowMapTexture","viewInverseTranspose","lightDirection","lightColor","ambientColor","fogColor","invCameraFar","materialColor","foregroundAlbedoScale","foreground"],"semantics": ["ATTR0","ATTR2"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_flat","fp_flat"]}],"flat_skinned":[{"name": "p0","parameters": ["skinBones","projection","worldView","worldViewInverseTranspose","viewShadowProjection0","shadowOffset0","viewShadowProjection1","shadowOffset1","viewShadowProjection2","shadowOffset2","viewShadowProjection3","shadowOffset3","invShadowSize","shadowMapTexture","viewInverseTranspose","lightDirection","lightColor","ambientColor","fogColor","invCameraFar","materialColor","foregroundAlbedoScale","foreground"],"semantics": ["ATTR0","ATTR2","ATTR7","ATTR1"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_flat_skinned","fp_flat"]}],"flat_nocull":[{"name": "p0","parameters": ["projection","worldView","worldViewInverseTranspose","viewShadowProjection0","shadowOffset0","viewShadowProjection1","shadowOffset1","viewShadowProjection2","shadowOffset2","viewShadowProjection3","shadowOffset3","invShadowSize","shadowMapTexture","viewInverseTranspose","lightDirection","lightColor","ambientColor","fogColor","invCameraFar","materialColor","foregroundAlbedoScale","foreground"],"semantics": ["ATTR0","ATTR2"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": false,"BlendEnable": false},"programs": ["vp_flat","fp_flat_nocull"]}],"flat_skinned_nocull":[{"name": "p0","parameters": ["skinBones","projection","worldView","worldViewInverseTranspose","viewShadowProjection0","shadowOffset0","viewShadowProjection1","shadowOffset1","viewShadowProjection2","shadowOffset2","viewShadowProjection3","shadowOffset3","invShadowSize","shadowMapTexture","viewInverseTranspose","lightDirection","lightColor","ambientColor","fogColor","invCameraFar","materialColor","foregroundAlbedoScale","foreground"],"semantics": ["ATTR0","ATTR2","ATTR7","ATTR1"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": false,"BlendEnable": false},"programs": ["vp_flat_skinned","fp_flat_nocull"]}],"flat_nolight":[{"name": "p0","parameters": ["projection","worldView","materialColor"],"semantics": ["ATTR0"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_flat_nolight","fp_flat_nolight"]}],"flat_nolight_skinned":[{"name": "p0","parameters": ["skinBones","projection","worldView","materialColor"],"semantics": ["ATTR0","ATTR7","ATTR1"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_flat_nolight_skinned","fp_flat_nolight"]}],"lambert":[{"name": "p0","parameters": ["uvTransform","projection","worldView","worldViewInverseTranspose","viewInverseTranspose","lightDirection","lightColor","ambientColor","fogColor","invCameraFar","materialColor","diffuse"],"semantics": ["ATTR0","ATTR2","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_lambert","fp_lambert"]}],"lambert_skinned":[{"name": "p0","parameters": ["skinBones","uvTransform","projection","worldView","worldViewInverseTranspose","viewInverseTranspose","lightDirection","lightColor","ambientColor","fogColor","invCameraFar","materialColor","diffuse"],"semantics": ["ATTR0","ATTR2","ATTR8","ATTR7","ATTR1"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_lambert_skinned","fp_lambert"]}],"blinn":[{"parameters": ["uvTransform","projection","worldView","worldViewInverseTranspose","viewShadowProjection0","shadowOffset0","viewShadowProjection1","shadowOffset1","viewShadowProjection2","shadowOffset2","viewShadowProjection3","shadowOffset3","invShadowSize","shadowMapTexture","viewInverseTranspose","lightDirection","lightColor","ambientColor","fogColor","invCameraFar","materialColor","foregroundAlbedoScale","foreground","diffuse"],"semantics": ["ATTR0","ATTR2","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_blinn","fp_blinn"]}],"blinn_nocull":[{"parameters": ["uvTransform","projection","worldView","worldViewInverseTranspose","viewShadowProjection0","shadowOffset0","viewShadowProjection1","shadowOffset1","viewShadowProjection2","shadowOffset2","viewShadowProjection3","shadowOffset3","invShadowSize","shadowMapTexture","viewInverseTranspose","lightDirection","lightColor","ambientColor","fogColor","invCameraFar","materialColor","foregroundAlbedoScale","foreground","diffuse"],"semantics": ["ATTR0","ATTR2","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": false,"BlendEnable": false},"programs": ["vp_blinn","fp_blinn"]}],"blinn_skinned":[{"parameters": ["skinBones","uvTransform","projection","worldView","worldViewInverseTranspose","viewShadowProjection0","shadowOffset0","viewShadowProjection1","shadowOffset1","viewShadowProjection2","shadowOffset2","viewShadowProjection3","shadowOffset3","invShadowSize","shadowMapTexture","viewInverseTranspose","lightDirection","lightColor","ambientColor","fogColor","invCameraFar","materialColor","foregroundAlbedoScale","foreground","diffuse"],"semantics": ["ATTR0","ATTR2","ATTR8","ATTR7","ATTR1"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_blinn_skinned","fp_blinn"]}],"blinn_skinned_nocull":[{"parameters": ["skinBones","uvTransform","projection","worldView","worldViewInverseTranspose","viewShadowProjection0","shadowOffset0","viewShadowProjection1","shadowOffset1","viewShadowProjection2","shadowOffset2","viewShadowProjection3","shadowOffset3","invShadowSize","shadowMapTexture","viewInverseTranspose","lightDirection","lightColor","ambientColor","fogColor","invCameraFar","materialColor","foregroundAlbedoScale","foreground","diffuse"],"semantics": ["ATTR0","ATTR2","ATTR8","ATTR7","ATTR1"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": false,"BlendEnable": false},"programs": ["vp_blinn_skinned","fp_blinn"]}],"phong":[{"name": "p0","parameters": ["uvTransform","projection","worldView","worldViewInverseTranspose","viewShadowProjection0","shadowOffset0","viewShadowProjection1","shadowOffset1","viewShadowProjection2","shadowOffset2","viewShadowProjection3","shadowOffset3","invShadowSize","shadowMapTexture","viewInverseTranspose","lightDirection","lightColor","ambientColor","fogColor","invCameraFar","materialColor","foreground","diffuse"],"semantics": ["ATTR0","ATTR2","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_blinn","fp_phong"]}],"phong_skinned":[{"name": "p0","parameters": ["skinBones","uvTransform","projection","worldView","worldViewInverseTranspose","viewShadowProjection0","shadowOffset0","viewShadowProjection1","shadowOffset1","viewShadowProjection2","shadowOffset2","viewShadowProjection3","shadowOffset3","invShadowSize","shadowMapTexture","viewInverseTranspose","lightDirection","lightColor","ambientColor","fogColor","invCameraFar","materialColor","foreground","diffuse"],"semantics": ["ATTR0","ATTR2","ATTR8","ATTR7","ATTR1"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_blinn_skinned","fp_phong"]}],"add":[{"parameters": ["uvTransform","projection","worldView","materialColor","diffuse"],"semantics": ["ATTR0","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"ColorMask": [1,1,1,0],"BlendEnable": true,"BlendFunc": [1,1],"PolygonOffset": [-1,-1],"PolygonOffsetFillEnable": true},"programs": ["vp_nolight","fp_premodulatealpha"]}],"add_skinned":[{"parameters": ["skinBones","uvTransform","projection","worldView","materialColor","diffuse"],"semantics": ["ATTR0","ATTR8","ATTR7","ATTR1"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"ColorMask": [1,1,1,0],"BlendEnable": true,"BlendFunc": [1,1],"PolygonOffset": [-1,-1],"PolygonOffsetFillEnable": true},"programs": ["vp_nolight_skinned","fp_premodulatealpha"]}],"blend":[{"parameters": ["uvTransform","projection","worldView","materialColor","diffuse"],"semantics": ["ATTR0","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"ColorMask": [1,1,1,0],"BlendEnable": true,"BlendFunc": [770,771],"PolygonOffset": [-1,-1],"PolygonOffsetFillEnable": true},"programs": ["vp_nolight","fp_normal"]}],"blend_skinned":[{"parameters": ["skinBones","uvTransform","projection","worldView","materialColor","diffuse"],"semantics": ["ATTR0","ATTR8","ATTR7","ATTR1"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"ColorMask": [1,1,1,0],"BlendEnable": true,"BlendFunc": [770,771],"PolygonOffset": [-1,-1],"PolygonOffsetFillEnable": true},"programs": ["vp_nolight_skinned","fp_normal"]}],"blend_nocull":[{"parameters": ["uvTransform","projection","worldView","materialColor","diffuse"],"semantics": ["ATTR0","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": false,"ColorMask": [1,1,1,0],"BlendEnable": true,"BlendFunc": [770,771],"PolygonOffset": [-1,-1],"PolygonOffsetFillEnable": true},"programs": ["vp_nolight","fp_normal"]}],"thermal":[{"parameters": ["uvTransform","projection","worldView","viewInverseTranspose","lightColor","ambientColor","materialColor","worldMinMaxY","diffuse"],"semantics": ["ATTR0","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": false,"ColorMask": [1,1,1,0],"BlendEnable": true,"BlendFunc": [770,771],"PolygonOffset": [-1,-1],"PolygonOffsetFillEnable": true},"programs": ["vp_thermal","fp_lambert"]}],"wake":[{"parameters": ["uvTransform","projection","worldView","viewShadowProjection0","shadowOffset0","viewShadowProjection1","shadowOffset1","viewShadowProjection2","shadowOffset2","viewShadowProjection3","shadowOffset3","invShadowSize","shadowMapTexture","lightColor","ambientColor","materialColor","diffuse"],"semantics": ["ATTR0","ATTR8","ATTR9"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": false,"ColorMask": [1,1,1,0],"BlendEnable": true,"BlendFunc": [770,771],"PolygonOffset": [-1,-1],"PolygonOffsetFillEnable": true},"programs": ["vp_wake","fp_wake"]}],"watertank":[{"parameters": ["uvTransform","projection","worldView","lightColor","ambientColor","fogColor","invCameraFar","diffuse"],"semantics": ["ATTR0","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": false,"BlendEnable": false},"programs": ["vp_watertank","fp_watertank"]}],"bird":[{"name": "p0","parameters": ["uvTransform","projection","worldView","time","lightColor","ambientColor","diffuse"],"semantics": ["ATTR0","ATTR8"],"states":{"DepthTestEnable": true,"DepthFunc": 515,"DepthMask": false,"CullFaceEnable": true,"CullFace": 1029,"BlendEnable": false},"programs": ["vp_bird","fp_bird"]}],"copy":[{"parameters": ["colorTexture"],"semantics": ["ATTR0","ATTR8"],"states":{"DepthTestEnable": false,"DepthMask": false,"CullFaceEnable": false,"BlendEnable": false},"programs": ["vp_copy","fp_copy"]}]},"programs":{"fp_copy":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];\nvec4 _ret_0;uniform sampler2D colorTexture;void main()\n{_ret_0=texture2D(colorTexture,tz_TexCoord[0].xy);gl_FragColor=_ret_0;}"},"vp_copy":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec4 ATTR8;\nvec4 _OUTPosition1;vec2 _OUTUV1;void main()\n{_OUTPosition1=ATTR0;_OUTUV1=ATTR8.xy;tz_TexCoord[0].xy=ATTR8.xy;gl_Position=ATTR0;}"},"fp_bird":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];\nvec4 _ret_0;vec4 _TMP0;vec3 _TMP2;vec3 _x0041;vec3 _TMP42;uniform vec3 lightColor;uniform vec3 ambientColor;uniform sampler2D diffuse;void main()\n{vec3 _TMP37;_TMP0=texture2D(diffuse,tz_TexCoord[0].xy);_x0041=ambientColor+lightColor;_TMP2=min(vec3(1.0,1.0,1.0),_x0041);_TMP42=max(vec3(0.0,0.0,0.0),_TMP2);_TMP37=_TMP0.xyz*_TMP42;_ret_0=vec4(_TMP37.x,_TMP37.y,_TMP37.z,0.0);gl_FragColor=_ret_0;}"},"vp_bird":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec4 ATTR8;\nvec4 _OUTPosition1;vec2 _OUTUV1;float _TMP0;uniform vec2 uvTransform[3];uniform vec4 projection[4];uniform vec3 worldView[4];uniform float time;void main()\n{vec3 _position;vec3 _viewPosition;_TMP0=abs(ATTR0.x);_position=vec3(ATTR0.x,ATTR0.y+4.0*time*_TMP0,ATTR0.z);_viewPosition=_position.xxx*worldView[0]+_position.yyy*worldView[1]+_position.zzz*worldView[2]+worldView[3];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];_OUTUV1=ATTR8.xx*uvTransform[0]+ATTR8.yy*uvTransform[1]+uvTransform[2];tz_TexCoord[0].xy=_OUTUV1;gl_Position=_OUTPosition1;}"},"fp_watertank":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];\nvec4 _ret_0;float _TMP3;vec3 _TMP2;vec4 _TMP0;vec3 _x0042;vec3 _TMP43;float _x0050;float _TMP51;uniform vec3 lightColor;uniform vec3 ambientColor;uniform vec3 fogColor;uniform float invCameraFar;uniform sampler2D diffuse;void main()\n{vec3 _color;_TMP0=texture2D(diffuse,tz_TexCoord[0].xy);_x0042=ambientColor+lightColor;_TMP2=min(vec3(1.0,1.0,1.0),_x0042);_TMP43=max(vec3(0.0,0.0,0.0),_TMP2);_color=_TMP0.xyz*_TMP43;_x0050=tz_TexCoord[0].z*invCameraFar;_TMP3=min(1.0,_x0050);_TMP51=max(0.0,_TMP3);_color=_color+_TMP51*(fogColor-_color);_ret_0=vec4(_color.x,_color.y,_color.z,0.0);gl_FragColor=_ret_0;}"},"vp_watertank":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec4 ATTR8;\nvec4 _OUTPosition1;vec3 _OUTUVDepth1;uniform vec2 uvTransform[3];uniform vec4 projection[4];uniform vec3 worldView[4];void main()\n{vec3 _viewPosition;_viewPosition=ATTR0.xxx*worldView[0]+ATTR0.yyy*worldView[1]+ATTR0.zzz*worldView[2]+worldView[3];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];_OUTUVDepth1.xy=ATTR8.xx*uvTransform[0]+ATTR8.yy*uvTransform[1]+uvTransform[2];_OUTUVDepth1.z=-_viewPosition.z;tz_TexCoord[0].xyz=_OUTUVDepth1;gl_Position=_OUTPosition1;}"},"fp_wake":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[2];\nvec4 _TMP12;float _TMP14;float _TMP16;float _TMP11;float _TMP9;float _TMP13;float _TMP8;float _TMP7;float _TMP6;float _TMP5;float _TMP4;float _TMP3;float _TMP2;float _TMP1;vec4 _TMP0;vec3 _TMP54;float _TMP58;vec4 _viewPositionH0059;float _shadowSpaceLimit0059;float _shadowSpaceX0059;float _shadowSpaceY0059;vec4 _shadowDepth0059;vec2 _shadowOffset0059;vec2 _shadowuv0059;float _depth0059;bool _TMP60;float _TMP101;float _TMP111;float _TMP117;uniform vec4 viewShadowProjection0[3];uniform vec2 shadowOffset0;uniform vec4 viewShadowProjection1[3];uniform vec2 shadowOffset1;uniform vec4 viewShadowProjection2[3];uniform vec2 shadowOffset2;uniform vec4 viewShadowProjection3[3];uniform vec2 shadowOffset3;uniform float invShadowSize;uniform sampler2D shadowMapTexture;uniform vec3 lightColor;uniform vec3 ambientColor;uniform vec4 materialColor;uniform sampler2D diffuse;void main()\n{vec4 _color;vec3 _lightContribution;float _shadowAttenuation1;_TMP0=texture2D(diffuse,tz_TexCoord[0].xy);_TMP54=min(lightColor,vec3(1.0,1.0,1.0));_lightContribution=_TMP54;_color.w=materialColor.w*_TMP0.y*tz_TexCoord[0].w;if(_color.w>1.00000001E-01){_TMP60=true;_viewPositionH0059=vec4(tz_TexCoord[1].x,tz_TexCoord[1].y,tz_TexCoord[1].z,1.0);_shadowSpaceLimit0059=1.0-invShadowSize;_shadowSpaceX0059=dot(_viewPositionH0059,viewShadowProjection0[0]);_shadowSpaceY0059=dot(_viewPositionH0059,viewShadowProjection0[1]);_TMP1=abs(_shadowSpaceX0059);_TMP2=abs(_shadowSpaceY0059);if(_TMP1<_shadowSpaceLimit0059&&_TMP2<_shadowSpaceLimit0059){_shadowDepth0059=viewShadowProjection0[2];_shadowOffset0059=shadowOffset0;}else{_shadowSpaceX0059=dot(_viewPositionH0059,viewShadowProjection1[0]);_shadowSpaceY0059=dot(_viewPositionH0059,viewShadowProjection1[1]);_TMP3=abs(_shadowSpaceX0059);_TMP4=abs(_shadowSpaceY0059);if(_TMP3<_shadowSpaceLimit0059&&_TMP4<_shadowSpaceLimit0059){_shadowDepth0059=viewShadowProjection1[2];_shadowOffset0059=shadowOffset1;}else{_shadowSpaceX0059=dot(_viewPositionH0059,viewShadowProjection2[0]);_shadowSpaceY0059=dot(_viewPositionH0059,viewShadowProjection2[1]);_TMP5=abs(_shadowSpaceX0059);_TMP6=abs(_shadowSpaceY0059);if(_TMP5<_shadowSpaceLimit0059&&_TMP6<_shadowSpaceLimit0059){_shadowDepth0059=viewShadowProjection2[2];_shadowOffset0059=shadowOffset2;}else{_shadowSpaceX0059=dot(_viewPositionH0059,viewShadowProjection3[0]);_shadowSpaceY0059=dot(_viewPositionH0059,viewShadowProjection3[1]);_TMP7=abs(_shadowSpaceX0059);_TMP8=abs(_shadowSpaceY0059);if(_TMP7<_shadowSpaceLimit0059&&_TMP8<_shadowSpaceLimit0059){_shadowDepth0059=viewShadowProjection3[2];_shadowOffset0059=shadowOffset3;}else{_TMP58=1.0;_TMP60=false;}}}}\nif(_TMP60){_shadowuv0059=vec2(_shadowSpaceX0059,_shadowSpaceY0059)*2.50000000E-01+_shadowOffset0059.xy;_TMP9=dot(_viewPositionH0059,_shadowDepth0059);_TMP13=dot(vec3(1.0,1.0,1.0),vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP16=min(1.0,_TMP13);_TMP101=max(0.0,_TMP16);_TMP11=min(_TMP9,_TMP101);_depth0059=_TMP11+-4.99999989E-03;_TMP12=texture2D(shadowMapTexture,_shadowuv0059);if(_TMP12.w>3.92156886E-03){_TMP14=dot(_TMP12.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP16=min(1.0,_TMP14);_TMP117=max(0.0,_TMP16);_TMP111=float((_TMP117>=_depth0059));}else{_TMP111=1.0;}\n_TMP58=_TMP111;}\n_shadowAttenuation1=_TMP58*4.00000006E-01+6.00000024E-01;_lightContribution=_TMP54*vec3(_shadowAttenuation1,_shadowAttenuation1,_shadowAttenuation1);}\n_color.xyz=materialColor.xyz*(_lightContribution+ambientColor);gl_FragColor=_color;}"},"vp_wake":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[2];attribute vec4 ATTR0;attribute vec4 ATTR8;attribute vec4 ATTR9;\nvec4 _OUTPosition1;vec3 _OUTViewPosition1;vec4 _OUTUV1;uniform vec2 uvTransform[3];uniform vec4 projection[4];uniform vec3 worldView[4];void main()\n{vec3 _viewPosition;_viewPosition=ATTR0.xxx*worldView[0]+ATTR0.yyy*worldView[1]+ATTR0.zzz*worldView[2]+worldView[3];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];_OUTUV1.xy=ATTR8.xx*uvTransform[0]+ATTR8.yy*uvTransform[1]+uvTransform[2];_OUTUV1.zw=ATTR9.xy;_OUTViewPosition1=_viewPosition;tz_TexCoord[0]=_OUTUV1;tz_TexCoord[1].xyz=_viewPosition;gl_Position=_OUTPosition1;}"},"fp_lambert":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying TZ_LOWP vec4 tz_Color;varying vec4 tz_TexCoord[1];\nvec4 _ret_0;vec4 _TMP0;uniform sampler2D diffuse;void main()\n{_TMP0=texture2D(diffuse,tz_TexCoord[0].xy);_ret_0=tz_Color*_TMP0;gl_FragColor=_ret_0;}"},"vp_thermal":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying TZ_LOWP vec4 tz_Color;varying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec4 ATTR8;\nvec4 _OUTPosition1;vec4 _OUTColor1;vec2 _OUTUV1;float _TMP1;vec3 _TMP2;vec4 _a0041;vec3 _x0043;vec3 _TMP44;float _a0051;uniform vec2 uvTransform[3];uniform vec4 projection[4];uniform vec3 worldView[4];uniform vec4 viewInverseTranspose[3];uniform vec3 lightColor;uniform vec3 ambientColor;uniform vec4 materialColor;uniform vec2 worldMinMaxY;void main()\n{vec3 _viewPosition;float _worldPositionY;_viewPosition=ATTR0.xxx*worldView[0]+ATTR0.yyy*worldView[1]+ATTR0.zzz*worldView[2]+worldView[3];_a0041=vec4(_viewPosition.x,_viewPosition.y,_viewPosition.z,1.0);_worldPositionY=dot(_a0041,viewInverseTranspose[1]);_x0043=lightColor+ambientColor;_TMP2=min(vec3(1.0,1.0,1.0),_x0043);_TMP44=max(vec3(0.0,0.0,0.0),_TMP2);_OUTColor1.xyz=materialColor.xyz*_TMP44;_a0051=_worldPositionY-(worldMinMaxY.y+worldMinMaxY.x)*0.5;_TMP1=abs(_a0051);_OUTColor1.w=1.0-_TMP1/((worldMinMaxY.y-worldMinMaxY.x)*0.5);_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];_OUTUV1=ATTR8.xx*uvTransform[0]+ATTR8.yy*uvTransform[1]+uvTransform[2];tz_TexCoord[0].xy=_OUTUV1;tz_Color=_OUTColor1;gl_Position=_OUTPosition1;}"},"fp_normal":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];\nvec4 _ret_0;vec4 _TMP0;uniform vec4 materialColor;uniform sampler2D diffuse;void main()\n{_TMP0=texture2D(diffuse,tz_TexCoord[0].xy);_ret_0=materialColor*_TMP0;gl_FragColor=_ret_0;}"},"vp_nolight":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec4 ATTR8;\nvec4 _OUTPosition1;vec2 _OUTUV1;uniform vec2 uvTransform[3];uniform vec4 projection[4];uniform vec3 worldView[4];void main()\n{vec3 _viewPosition;_viewPosition=ATTR0.xxx*worldView[0]+ATTR0.yyy*worldView[1]+ATTR0.zzz*worldView[2]+worldView[3];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];_OUTUV1=ATTR8.xx*uvTransform[0]+ATTR8.yy*uvTransform[1]+uvTransform[2];tz_TexCoord[0].xy=_OUTUV1;gl_Position=_OUTPosition1;}"},"vp_nolight_skinned":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec4 ATTR8;\nvec4 _OUTPosition1;vec2 _OUTUV1;ivec4 _Indices0036;vec4 _skinMatrix0036[3];attribute vec4 ATTR7;attribute vec4 ATTR1;uniform vec4 skinBones[228];uniform vec2 uvTransform[3];uniform vec4 projection[4];uniform vec3 worldView[4];void main()\n{vec4 _skinTempPosition;vec3 _Position;vec3 _viewPosition;_Indices0036=ivec4(int((3.0*ATTR7).x),int((3.0*ATTR7).y),int((3.0*ATTR7).z),int((3.0*ATTR7).w));_skinMatrix0036[0]=ATTR1.x*skinBones[_Indices0036.x];_skinMatrix0036[1]=ATTR1.x*skinBones[(_Indices0036.x+1)];_skinMatrix0036[2]=ATTR1.x*skinBones[(_Indices0036.x+2)];_skinMatrix0036[0]=_skinMatrix0036[0]+ATTR1.y*skinBones[_Indices0036.y];_skinMatrix0036[1]=_skinMatrix0036[1]+ATTR1.y*skinBones[(_Indices0036.y+1)];_skinMatrix0036[2]=_skinMatrix0036[2]+ATTR1.y*skinBones[(_Indices0036.y+2)];_skinMatrix0036[0]=_skinMatrix0036[0]+ATTR1.z*skinBones[_Indices0036.z];_skinMatrix0036[1]=_skinMatrix0036[1]+ATTR1.z*skinBones[(_Indices0036.z+1)];_skinMatrix0036[2]=_skinMatrix0036[2]+ATTR1.z*skinBones[(_Indices0036.z+2)];_skinMatrix0036[0]=_skinMatrix0036[0]+ATTR1.w*skinBones[_Indices0036.w];_skinMatrix0036[1]=_skinMatrix0036[1]+ATTR1.w*skinBones[(_Indices0036.w+1)];_skinMatrix0036[2]=_skinMatrix0036[2]+ATTR1.w*skinBones[(_Indices0036.w+2)];_skinTempPosition=vec4(ATTR0.x,ATTR0.y,ATTR0.z,1.0);_Position.x=dot(_skinTempPosition,_skinMatrix0036[0]);_Position.y=dot(_skinTempPosition,_skinMatrix0036[1]);_Position.z=dot(_skinTempPosition,_skinMatrix0036[2]);_viewPosition=_Position.xxx*worldView[0]+_Position.yyy*worldView[1]+_Position.zzz*worldView[2]+worldView[3];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];_OUTUV1=ATTR8.xx*uvTransform[0]+ATTR8.yy*uvTransform[1]+uvTransform[2];tz_TexCoord[0].xy=_OUTUV1;gl_Position=_OUTPosition1;}"},"fp_premodulatealpha":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[1];\nvec4 _TMP0;uniform vec4 materialColor;uniform sampler2D diffuse;void main()\n{vec4 _color;_TMP0=texture2D(diffuse,tz_TexCoord[0].xy);_color=materialColor*_TMP0;_color.xyz=_color.xyz*materialColor.www;gl_FragColor=_color;}"},"fp_phong":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[3];\nvec4 _ret_0;float _TMP1;float _TMP33;float _TMP37;float _TMP9;float _TMP8;float _TMP6;float _TMP32;float _TMP4;float _TMP3;vec4 _TMP30;float _TMP35;vec4 _TMP28;vec4 _TMP26;vec4 _TMP24;vec4 _TMP22;float _TMP21;float _TMP19;float _TMP34;float _TMP18;float _TMP17;float _TMP16;float _TMP15;float _TMP14;float _TMP13;float _TMP12;float _TMP11;float _TMP5;vec4 _TMP0;vec3 _TMP83;float _d0084;float _shadowAttenuation10084;vec3 _Vn10084;vec3 _R10084;float _s10084;vec3 _specular10084;vec3 _color0084;float _worldPositionY0084;float _fogFactor0084;float _TMP87;vec4 _viewPositionH0088;float _shadowSpaceLimit0088;float _shadowSpaceX0088;float _shadowSpaceY0088;vec4 _shadowDepth0088;vec2 _shadowOffset0088;vec2 _shadowuv0088;float _depth0088;bool _TMP89;float _TMP130;float _TMP140;float _TMP146;vec2 _c0153;float _TMP154;float _TMP160;vec2 _c0167;float _TMP168;float _TMP174;vec2 _c0181;float _TMP182;float _TMP188;vec2 _c0195;float _TMP196;float _TMP202;vec3 _v0209;float _TMP222;vec4 _a0235;float _x0237;float _TMP238;uniform vec4 viewShadowProjection0[3];uniform vec2 shadowOffset0;uniform vec4 viewShadowProjection1[3];uniform vec2 shadowOffset1;uniform vec4 viewShadowProjection2[3];uniform vec2 shadowOffset2;uniform vec4 viewShadowProjection3[3];uniform vec2 shadowOffset3;uniform float invShadowSize;uniform sampler2D shadowMapTexture;uniform vec4 viewInverseTranspose[3];uniform vec3 lightDirection;uniform vec3 lightColor;uniform vec3 ambientColor;uniform vec3 fogColor;uniform float invCameraFar;uniform vec4 materialColor;uniform bool foreground;uniform sampler2D diffuse;void main()\n{vec3 _Nn1;vec4 _diffuseColor;_TMP3=dot(tz_TexCoord[1].xyz,tz_TexCoord[1].xyz);_TMP4=inversesqrt(_TMP3);_Nn1=_TMP4*tz_TexCoord[1].xyz;_TMP0=texture2D(diffuse,tz_TexCoord[0].xy);_diffuseColor=materialColor*_TMP0;if(foreground){_TMP1=_diffuseColor.w;}else{_TMP1=0.0;}\n_TMP5=dot(lightDirection,_Nn1);_d0084=-_TMP5;if(0.0<_d0084){_TMP89=true;_viewPositionH0088=vec4(tz_TexCoord[2].x,tz_TexCoord[2].y,tz_TexCoord[2].z,1.0);_shadowSpaceLimit0088=1.0-invShadowSize;_shadowSpaceX0088=dot(_viewPositionH0088,viewShadowProjection0[0]);_shadowSpaceY0088=dot(_viewPositionH0088,viewShadowProjection0[1]);_TMP11=abs(_shadowSpaceX0088);_TMP12=abs(_shadowSpaceY0088);if(_TMP11<_shadowSpaceLimit0088&&_TMP12<_shadowSpaceLimit0088){_shadowDepth0088=viewShadowProjection0[2];_shadowOffset0088=shadowOffset0;}else{_shadowSpaceX0088=dot(_viewPositionH0088,viewShadowProjection1[0]);_shadowSpaceY0088=dot(_viewPositionH0088,viewShadowProjection1[1]);_TMP13=abs(_shadowSpaceX0088);_TMP14=abs(_shadowSpaceY0088);if(_TMP13<_shadowSpaceLimit0088&&_TMP14<_shadowSpaceLimit0088){_shadowDepth0088=viewShadowProjection1[2];_shadowOffset0088=shadowOffset1;}else{_shadowSpaceX0088=dot(_viewPositionH0088,viewShadowProjection2[0]);_shadowSpaceY0088=dot(_viewPositionH0088,viewShadowProjection2[1]);_TMP15=abs(_shadowSpaceX0088);_TMP16=abs(_shadowSpaceY0088);if(_TMP15<_shadowSpaceLimit0088&&_TMP16<_shadowSpaceLimit0088){_shadowDepth0088=viewShadowProjection2[2];_shadowOffset0088=shadowOffset2;}else{_shadowSpaceX0088=dot(_viewPositionH0088,viewShadowProjection3[0]);_shadowSpaceY0088=dot(_viewPositionH0088,viewShadowProjection3[1]);_TMP17=abs(_shadowSpaceX0088);_TMP18=abs(_shadowSpaceY0088);if(_TMP17<_shadowSpaceLimit0088&&_TMP18<_shadowSpaceLimit0088){_shadowDepth0088=viewShadowProjection3[2];_shadowOffset0088=shadowOffset3;}else{_TMP87=1.0;_TMP89=false;}}}}\nif(_TMP89){_shadowuv0088=vec2(_shadowSpaceX0088,_shadowSpaceY0088)*2.50000000E-01+_shadowOffset0088.xy;_TMP19=dot(_viewPositionH0088,_shadowDepth0088);_TMP34=dot(vec3(1.0,1.0,1.0),vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP37=min(1.0,_TMP34);_TMP130=max(0.0,_TMP37);_TMP21=min(_TMP19,_TMP130);_depth0088=_TMP21+-4.99999989E-03;_TMP22=texture2D(shadowMapTexture,_shadowuv0088);if(_TMP22.w>3.92156886E-03){_TMP35=dot(_TMP22.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP37=min(1.0,_TMP35);_TMP146=max(0.0,_TMP37);_TMP140=float((_TMP146>=_depth0088));}else{_TMP140=1.0;}\n_c0153=_shadowuv0088+vec2(-invShadowSize,0.0);_TMP24=texture2D(shadowMapTexture,_c0153);if(_TMP24.w>3.92156886E-03){_TMP35=dot(_TMP24.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP37=min(1.0,_TMP35);_TMP160=max(0.0,_TMP37);_TMP154=float((_TMP160>=_depth0088));}else{_TMP154=1.0;}\n_c0167=_shadowuv0088+vec2(0.0,-invShadowSize);_TMP26=texture2D(shadowMapTexture,_c0167);if(_TMP26.w>3.92156886E-03){_TMP35=dot(_TMP26.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP37=min(1.0,_TMP35);_TMP174=max(0.0,_TMP37);_TMP168=float((_TMP174>=_depth0088));}else{_TMP168=1.0;}\n_c0181=_shadowuv0088+vec2(invShadowSize,0.0);_TMP28=texture2D(shadowMapTexture,_c0181);if(_TMP28.w>3.92156886E-03){_TMP35=dot(_TMP28.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP37=min(1.0,_TMP35);_TMP188=max(0.0,_TMP37);_TMP182=float((_TMP188>=_depth0088));}else{_TMP182=1.0;}\n_c0195=_shadowuv0088+vec2(0.0,invShadowSize);_TMP30=texture2D(shadowMapTexture,_c0195);if(_TMP30.w>3.92156886E-03){_TMP35=dot(_TMP30.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP37=min(1.0,_TMP35);_TMP202=max(0.0,_TMP37);_TMP196=float((_TMP202>=_depth0088));}else{_TMP196=1.0;}\n_TMP87=(_TMP140+_TMP154+_TMP168+_TMP182+_TMP196)*2.00000003E-01;}\nif(foreground){if(_TMP87>4.00000006E-01){_v0209=-tz_TexCoord[2].xyz;_TMP3=dot(_v0209,_v0209);_TMP4=inversesqrt(_TMP3);_Vn10084=_TMP4*_v0209;_TMP32=dot(_Nn1,lightDirection);_R10084=lightDirection-(2.0*_Nn1)*_TMP32;_TMP6=dot(_R10084,_Vn10084);_TMP37=min(1.0,_TMP6);_TMP222=max(0.0,_TMP37);_s10084=pow(_TMP222,32.0);if(_s10084>7.50000000E-01){_TMP8=0.5;}else{_TMP8=0.0;}\n_specular10084=_TMP8*lightColor;_color0084=_specular10084+_diffuseColor.xyz*(lightColor+ambientColor);}else{_color0084=_diffuseColor.xyz*ambientColor;}}else{_shadowAttenuation10084=_TMP87*0.5+0.5;_TMP33=inversesqrt(_d0084);_TMP9=1.0/_TMP33;_color0084=_diffuseColor.xyz*((_TMP9*_shadowAttenuation10084)*lightColor+ambientColor);}}else{_color0084=_diffuseColor.xyz*ambientColor;}\n_a0235=vec4(tz_TexCoord[2].x,tz_TexCoord[2].y,tz_TexCoord[2].z,1.0);_worldPositionY0084=dot(_a0235,viewInverseTranspose[1]);_x0237=(-tz_TexCoord[2].z-_worldPositionY0084)*invCameraFar;_TMP37=min(1.0,_x0237);_TMP238=max(0.0,_TMP37);_TMP33=inversesqrt(_TMP238);_fogFactor0084=1.0/_TMP33;_TMP83=_color0084+_fogFactor0084*(fogColor-_color0084);_ret_0=vec4(_TMP83.x,_TMP83.y,_TMP83.z,_TMP1);gl_FragColor=_ret_0;}"},"vp_blinn_skinned":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[3];attribute vec4 ATTR0;attribute vec3 ATTR2;attribute vec4 ATTR8;\nvec4 _OUTPosition1;vec3 _OUTViewNormal1;vec2 _OUTUV1;vec3 _OUTViewPosition1;float _TMP1;float _TMP0;ivec4 _Indices0037;vec4 _skinVectorX0037;vec4 _skinVectorY0037;vec4 _skinVectorZ0037;attribute vec4 ATTR7;attribute vec4 ATTR1;uniform vec4 skinBones[228];uniform vec2 uvTransform[3];uniform vec4 projection[4];uniform vec3 worldView[4];uniform vec3 worldViewInverseTranspose[3];void main()\n{vec4 _skinTempPosition;vec3 _Position;vec3 _Normal;vec3 _viewPosition;vec3 _viewNormal;_Indices0037=ivec4(int((3.0*ATTR7).x),int((3.0*ATTR7).y),int((3.0*ATTR7).z),int((3.0*ATTR7).w));_skinVectorX0037=ATTR1.x*skinBones[_Indices0037.x];_skinVectorY0037=ATTR1.x*skinBones[(_Indices0037.x+1)];_skinVectorZ0037=ATTR1.x*skinBones[(_Indices0037.x+2)];_skinVectorX0037=_skinVectorX0037+ATTR1.y*skinBones[_Indices0037.y];_skinVectorY0037=_skinVectorY0037+ATTR1.y*skinBones[(_Indices0037.y+1)];_skinVectorZ0037=_skinVectorZ0037+ATTR1.y*skinBones[(_Indices0037.y+2)];_skinVectorX0037=_skinVectorX0037+ATTR1.z*skinBones[_Indices0037.z];_skinVectorY0037=_skinVectorY0037+ATTR1.z*skinBones[(_Indices0037.z+1)];_skinVectorZ0037=_skinVectorZ0037+ATTR1.z*skinBones[(_Indices0037.z+2)];_skinVectorX0037=_skinVectorX0037+ATTR1.w*skinBones[_Indices0037.w];_skinVectorY0037=_skinVectorY0037+ATTR1.w*skinBones[(_Indices0037.w+1)];_skinVectorZ0037=_skinVectorZ0037+ATTR1.w*skinBones[(_Indices0037.w+2)];_skinTempPosition=vec4(ATTR0.x,ATTR0.y,ATTR0.z,1.0);_Position.x=dot(_skinTempPosition,_skinVectorX0037);_Position.y=dot(_skinTempPosition,_skinVectorY0037);_Position.z=dot(_skinTempPosition,_skinVectorZ0037);_Normal.x=dot(ATTR2,_skinVectorX0037.xyz);_Normal.y=dot(ATTR2,_skinVectorY0037.xyz);_Normal.z=dot(ATTR2,_skinVectorZ0037.xyz);_TMP0=dot(_Normal,_Normal);_TMP1=inversesqrt(_TMP0);_Normal=_TMP1*_Normal;_viewPosition=_Position.xxx*worldView[0]+_Position.yyy*worldView[1]+_Position.zzz*worldView[2]+worldView[3];_viewNormal=_Normal.xxx*worldViewInverseTranspose[0]+_Normal.yyy*worldViewInverseTranspose[1]+_Normal.zzz*worldViewInverseTranspose[2];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];_OUTUV1=ATTR8.xx*uvTransform[0]+ATTR8.yy*uvTransform[1]+uvTransform[2];_OUTViewNormal1=_viewNormal;_OUTViewPosition1=_viewPosition;tz_TexCoord[2].xyz=_viewPosition;tz_TexCoord[0].xy=_OUTUV1;tz_TexCoord[1].xyz=_viewNormal;gl_Position=_OUTPosition1;}"},"vp_blinn":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[3];attribute vec4 ATTR0;attribute vec3 ATTR2;attribute vec4 ATTR8;\nvec4 _OUTPosition1;vec3 _OUTViewNormal1;vec2 _OUTUV1;vec3 _OUTViewPosition1;uniform vec2 uvTransform[3];uniform vec4 projection[4];uniform vec3 worldView[4];uniform vec3 worldViewInverseTranspose[3];void main()\n{vec3 _viewPosition;vec3 _viewNormal;_viewPosition=ATTR0.xxx*worldView[0]+ATTR0.yyy*worldView[1]+ATTR0.zzz*worldView[2]+worldView[3];_viewNormal=ATTR2.xxx*worldViewInverseTranspose[0]+ATTR2.yyy*worldViewInverseTranspose[1]+ATTR2.zzz*worldViewInverseTranspose[2];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];_OUTUV1=ATTR8.xx*uvTransform[0]+ATTR8.yy*uvTransform[1]+uvTransform[2];_OUTViewNormal1=_viewNormal;_OUTViewPosition1=_viewPosition;tz_TexCoord[2].xyz=_viewPosition;tz_TexCoord[0].xy=_OUTUV1;tz_TexCoord[1].xyz=_viewNormal;gl_Position=_OUTPosition1;}"},"fp_blinn":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[3];\nvec4 _ret_0;float _TMP1;float _TMP32;float _TMP36;float _TMP9;vec4 _TMP30;float _TMP34;vec4 _TMP28;vec4 _TMP26;vec4 _TMP24;vec4 _TMP22;float _TMP21;float _TMP19;float _TMP33;float _TMP18;float _TMP17;float _TMP16;float _TMP15;float _TMP14;float _TMP13;float _TMP12;float _TMP11;float _TMP8;float _TMP6;float _TMP4;float _TMP3;float _TMP5;vec4 _TMP0;vec3 _TMP82;float _d0083;vec3 _Vn10083;vec3 _Hn10083;float _s10083;vec3 _specular10083;vec3 _color0083;float _shadowAttenuation20083;float _worldPositionY10083;float _fogFactor10083;float _TMP86;vec4 _viewPositionH0087;float _shadowSpaceLimit0087;float _shadowSpaceX0087;float _shadowSpaceY0087;vec4 _shadowDepth0087;vec2 _shadowOffset0087;vec2 _shadowuv0087;float _depth0087;bool _TMP88;float _TMP129;float _TMP139;float _TMP145;vec2 _c0152;float _TMP153;float _TMP159;vec2 _c0166;float _TMP167;float _TMP173;vec2 _c0180;float _TMP181;float _TMP187;vec2 _c0194;float _TMP195;float _TMP201;vec3 _v0208;vec3 _v0214;float _TMP223;float _TMP231;vec4 _viewPositionH0232;float _shadowSpaceLimit0232;float _shadowSpaceX0232;float _shadowSpaceY0232;vec4 _shadowDepth0232;vec2 _shadowOffset0232;vec2 _shadowuv0232;float _depth0232;bool _TMP233;float _TMP274;float _TMP284;float _TMP290;vec2 _c0297;float _TMP298;float _TMP304;vec2 _c0311;float _TMP312;float _TMP318;vec2 _c0325;float _TMP326;float _TMP332;vec2 _c0339;float _TMP340;float _TMP346;vec4 _a0357;float _x0359;float _TMP360;uniform vec4 viewShadowProjection0[3];uniform vec2 shadowOffset0;uniform vec4 viewShadowProjection1[3];uniform vec2 shadowOffset1;uniform vec4 viewShadowProjection2[3];uniform vec2 shadowOffset2;uniform vec4 viewShadowProjection3[3];uniform vec2 shadowOffset3;uniform float invShadowSize;uniform sampler2D shadowMapTexture;uniform vec4 viewInverseTranspose[3];uniform vec3 lightDirection;uniform vec3 lightColor;uniform vec3 ambientColor;uniform vec3 fogColor;uniform float invCameraFar;uniform vec4 materialColor;uniform vec3 foregroundAlbedoScale;uniform bool foreground;uniform sampler2D diffuse;void main()\n{vec3 _Nn1;vec4 _diffuseColor;_TMP3=dot(tz_TexCoord[1].xyz,tz_TexCoord[1].xyz);_TMP4=inversesqrt(_TMP3);_Nn1=_TMP4*tz_TexCoord[1].xyz;_TMP0=texture2D(diffuse,tz_TexCoord[0].xy);_diffuseColor=materialColor*_TMP0;if(foreground){_TMP1=_diffuseColor.w;}else{_TMP1=0.0;}\n_TMP5=dot(lightDirection,_Nn1);_d0083=-_TMP5;if(foreground){if(0.0<_d0083){_TMP88=true;_viewPositionH0087=vec4(tz_TexCoord[2].x,tz_TexCoord[2].y,tz_TexCoord[2].z,1.0);_shadowSpaceLimit0087=1.0-invShadowSize;_shadowSpaceX0087=dot(_viewPositionH0087,viewShadowProjection0[0]);_shadowSpaceY0087=dot(_viewPositionH0087,viewShadowProjection0[1]);_TMP11=abs(_shadowSpaceX0087);_TMP12=abs(_shadowSpaceY0087);if(_TMP11<_shadowSpaceLimit0087&&_TMP12<_shadowSpaceLimit0087){_shadowDepth0087=viewShadowProjection0[2];_shadowOffset0087=shadowOffset0;}else{_shadowSpaceX0087=dot(_viewPositionH0087,viewShadowProjection1[0]);_shadowSpaceY0087=dot(_viewPositionH0087,viewShadowProjection1[1]);_TMP13=abs(_shadowSpaceX0087);_TMP14=abs(_shadowSpaceY0087);if(_TMP13<_shadowSpaceLimit0087&&_TMP14<_shadowSpaceLimit0087){_shadowDepth0087=viewShadowProjection1[2];_shadowOffset0087=shadowOffset1;}else{_shadowSpaceX0087=dot(_viewPositionH0087,viewShadowProjection2[0]);_shadowSpaceY0087=dot(_viewPositionH0087,viewShadowProjection2[1]);_TMP15=abs(_shadowSpaceX0087);_TMP16=abs(_shadowSpaceY0087);if(_TMP15<_shadowSpaceLimit0087&&_TMP16<_shadowSpaceLimit0087){_shadowDepth0087=viewShadowProjection2[2];_shadowOffset0087=shadowOffset2;}else{_shadowSpaceX0087=dot(_viewPositionH0087,viewShadowProjection3[0]);_shadowSpaceY0087=dot(_viewPositionH0087,viewShadowProjection3[1]);_TMP17=abs(_shadowSpaceX0087);_TMP18=abs(_shadowSpaceY0087);if(_TMP17<_shadowSpaceLimit0087&&_TMP18<_shadowSpaceLimit0087){_shadowDepth0087=viewShadowProjection3[2];_shadowOffset0087=shadowOffset3;}else{_TMP86=1.0;_TMP88=false;}}}}\nif(_TMP88){_shadowuv0087=vec2(_shadowSpaceX0087,_shadowSpaceY0087)*2.50000000E-01+_shadowOffset0087.xy;_TMP19=dot(_viewPositionH0087,_shadowDepth0087);_TMP33=dot(vec3(1.0,1.0,1.0),vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP36=min(1.0,_TMP33);_TMP129=max(0.0,_TMP36);_TMP21=min(_TMP19,_TMP129);_depth0087=_TMP21+-4.99999989E-03;_TMP22=texture2D(shadowMapTexture,_shadowuv0087);if(_TMP22.w>3.92156886E-03){_TMP34=dot(_TMP22.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP36=min(1.0,_TMP34);_TMP145=max(0.0,_TMP36);_TMP139=float((_TMP145>=_depth0087));}else{_TMP139=1.0;}\n_c0152=_shadowuv0087+vec2(-invShadowSize,0.0);_TMP24=texture2D(shadowMapTexture,_c0152);if(_TMP24.w>3.92156886E-03){_TMP34=dot(_TMP24.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP36=min(1.0,_TMP34);_TMP159=max(0.0,_TMP36);_TMP153=float((_TMP159>=_depth0087));}else{_TMP153=1.0;}\n_c0166=_shadowuv0087+vec2(0.0,-invShadowSize);_TMP26=texture2D(shadowMapTexture,_c0166);if(_TMP26.w>3.92156886E-03){_TMP34=dot(_TMP26.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP36=min(1.0,_TMP34);_TMP173=max(0.0,_TMP36);_TMP167=float((_TMP173>=_depth0087));}else{_TMP167=1.0;}\n_c0180=_shadowuv0087+vec2(invShadowSize,0.0);_TMP28=texture2D(shadowMapTexture,_c0180);if(_TMP28.w>3.92156886E-03){_TMP34=dot(_TMP28.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP36=min(1.0,_TMP34);_TMP187=max(0.0,_TMP36);_TMP181=float((_TMP187>=_depth0087));}else{_TMP181=1.0;}\n_c0194=_shadowuv0087+vec2(0.0,invShadowSize);_TMP30=texture2D(shadowMapTexture,_c0194);if(_TMP30.w>3.92156886E-03){_TMP34=dot(_TMP30.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP36=min(1.0,_TMP34);_TMP201=max(0.0,_TMP36);_TMP195=float((_TMP201>=_depth0087));}else{_TMP195=1.0;}\n_TMP86=(_TMP139+_TMP153+_TMP167+_TMP181+_TMP195)*2.00000003E-01;}\nif(_TMP86>4.00000006E-01){_v0208=-tz_TexCoord[2].xyz;_TMP3=dot(_v0208,_v0208);_TMP4=inversesqrt(_TMP3);_Vn10083=_TMP4*_v0208;_v0214=_Vn10083-lightDirection;_TMP3=dot(_v0214,_v0214);_TMP4=inversesqrt(_TMP3);_Hn10083=_TMP4*_v0214;_TMP6=dot(_Hn10083,_Nn1);_TMP36=min(1.0,_TMP6);_TMP223=max(0.0,_TMP36);_s10083=pow(_TMP223,32.0);if(_s10083>7.50000000E-01){_TMP8=0.5;}else{_TMP8=0.0;}\n_specular10083=_TMP8*lightColor;_color0083=_specular10083+_diffuseColor.xyz*foregroundAlbedoScale.x;}else{_color0083=_diffuseColor.xyz*foregroundAlbedoScale.y;}}else{_color0083=_diffuseColor.xyz*foregroundAlbedoScale.z;}\n_TMP82=_color0083;}else{if(0.0<_d0083){_TMP233=true;_viewPositionH0232=vec4(tz_TexCoord[2].x,tz_TexCoord[2].y,tz_TexCoord[2].z,1.0);_shadowSpaceLimit0232=1.0-invShadowSize;_shadowSpaceX0232=dot(_viewPositionH0232,viewShadowProjection0[0]);_shadowSpaceY0232=dot(_viewPositionH0232,viewShadowProjection0[1]);_TMP11=abs(_shadowSpaceX0232);_TMP12=abs(_shadowSpaceY0232);if(_TMP11<_shadowSpaceLimit0232&&_TMP12<_shadowSpaceLimit0232){_shadowDepth0232=viewShadowProjection0[2];_shadowOffset0232=shadowOffset0;}else{_shadowSpaceX0232=dot(_viewPositionH0232,viewShadowProjection1[0]);_shadowSpaceY0232=dot(_viewPositionH0232,viewShadowProjection1[1]);_TMP13=abs(_shadowSpaceX0232);_TMP14=abs(_shadowSpaceY0232);if(_TMP13<_shadowSpaceLimit0232&&_TMP14<_shadowSpaceLimit0232){_shadowDepth0232=viewShadowProjection1[2];_shadowOffset0232=shadowOffset1;}else{_shadowSpaceX0232=dot(_viewPositionH0232,viewShadowProjection2[0]);_shadowSpaceY0232=dot(_viewPositionH0232,viewShadowProjection2[1]);_TMP15=abs(_shadowSpaceX0232);_TMP16=abs(_shadowSpaceY0232);if(_TMP15<_shadowSpaceLimit0232&&_TMP16<_shadowSpaceLimit0232){_shadowDepth0232=viewShadowProjection2[2];_shadowOffset0232=shadowOffset2;}else{_shadowSpaceX0232=dot(_viewPositionH0232,viewShadowProjection3[0]);_shadowSpaceY0232=dot(_viewPositionH0232,viewShadowProjection3[1]);_TMP17=abs(_shadowSpaceX0232);_TMP18=abs(_shadowSpaceY0232);if(_TMP17<_shadowSpaceLimit0232&&_TMP18<_shadowSpaceLimit0232){_shadowDepth0232=viewShadowProjection3[2];_shadowOffset0232=shadowOffset3;}else{_TMP231=1.0;_TMP233=false;}}}}\nif(_TMP233){_shadowuv0232=vec2(_shadowSpaceX0232,_shadowSpaceY0232)*2.50000000E-01+_shadowOffset0232.xy;_TMP19=dot(_viewPositionH0232,_shadowDepth0232);_TMP33=dot(vec3(1.0,1.0,1.0),vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP36=min(1.0,_TMP33);_TMP274=max(0.0,_TMP36);_TMP21=min(_TMP19,_TMP274);_depth0232=_TMP21+-4.99999989E-03;_TMP22=texture2D(shadowMapTexture,_shadowuv0232);if(_TMP22.w>3.92156886E-03){_TMP34=dot(_TMP22.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP36=min(1.0,_TMP34);_TMP290=max(0.0,_TMP36);_TMP284=float((_TMP290>=_depth0232));}else{_TMP284=1.0;}\n_c0297=_shadowuv0232+vec2(-invShadowSize,0.0);_TMP24=texture2D(shadowMapTexture,_c0297);if(_TMP24.w>3.92156886E-03){_TMP34=dot(_TMP24.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP36=min(1.0,_TMP34);_TMP304=max(0.0,_TMP36);_TMP298=float((_TMP304>=_depth0232));}else{_TMP298=1.0;}\n_c0311=_shadowuv0232+vec2(0.0,-invShadowSize);_TMP26=texture2D(shadowMapTexture,_c0311);if(_TMP26.w>3.92156886E-03){_TMP34=dot(_TMP26.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP36=min(1.0,_TMP34);_TMP318=max(0.0,_TMP36);_TMP312=float((_TMP318>=_depth0232));}else{_TMP312=1.0;}\n_c0325=_shadowuv0232+vec2(invShadowSize,0.0);_TMP28=texture2D(shadowMapTexture,_c0325);if(_TMP28.w>3.92156886E-03){_TMP34=dot(_TMP28.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP36=min(1.0,_TMP34);_TMP332=max(0.0,_TMP36);_TMP326=float((_TMP332>=_depth0232));}else{_TMP326=1.0;}\n_c0339=_shadowuv0232+vec2(0.0,invShadowSize);_TMP30=texture2D(shadowMapTexture,_c0339);if(_TMP30.w>3.92156886E-03){_TMP34=dot(_TMP30.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP36=min(1.0,_TMP34);_TMP346=max(0.0,_TMP36);_TMP340=float((_TMP346>=_depth0232));}else{_TMP340=1.0;}\n_TMP231=(_TMP284+_TMP298+_TMP312+_TMP326+_TMP340)*2.00000003E-01;}\n_shadowAttenuation20083=_TMP231*0.5+0.5;_TMP32=inversesqrt(_d0083);_TMP9=1.0/_TMP32;_color0083=_diffuseColor.xyz*((_TMP9*_shadowAttenuation20083)*lightColor+ambientColor);}else{_color0083=_diffuseColor.xyz*ambientColor;}\n_a0357=vec4(tz_TexCoord[2].x,tz_TexCoord[2].y,tz_TexCoord[2].z,1.0);_worldPositionY10083=dot(_a0357,viewInverseTranspose[1]);_x0359=(-tz_TexCoord[2].z-_worldPositionY10083)*invCameraFar;_TMP36=min(1.0,_x0359);_TMP360=max(0.0,_TMP36);_TMP32=inversesqrt(_TMP360);_fogFactor10083=1.0/_TMP32;_TMP82=_color0083+_fogFactor10083*(fogColor-_color0083);}\n_ret_0=vec4(_TMP82.x,_TMP82.y,_TMP82.z,_TMP1);gl_FragColor=_ret_0;}"},"vp_lambert_skinned":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying TZ_LOWP vec4 tz_Color;varying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec3 ATTR2;attribute vec4 ATTR8;\nvec4 _OUTPosition1;vec4 _OUTColor1;vec2 _OUTUV1;float _TMP5;float _TMP6;float _TMP3;float _TMP2;float _TMP1;ivec4 _Indices0044;vec4 _skinVectorX0044;vec4 _skinVectorY0044;vec4 _skinVectorZ0044;vec3 _TMP69;float _d0070;vec3 _color0070;float _worldPositionY0070;float _fogFactor0070;vec4 _a0074;float _x0076;float _TMP77;attribute vec4 ATTR7;attribute vec4 ATTR1;uniform vec4 skinBones[228];uniform vec2 uvTransform[3];uniform vec4 projection[4];uniform vec3 worldView[4];uniform vec3 worldViewInverseTranspose[3];uniform vec4 viewInverseTranspose[3];uniform vec3 lightDirection;uniform vec3 lightColor;uniform vec3 ambientColor;uniform vec3 fogColor;uniform float invCameraFar;uniform vec4 materialColor;void main()\n{vec4 _skinTempPosition;vec3 _Position;vec3 _Normal;vec3 _viewPosition1;vec3 _viewNormal;_Indices0044=ivec4(int((3.0*ATTR7).x),int((3.0*ATTR7).y),int((3.0*ATTR7).z),int((3.0*ATTR7).w));_skinVectorX0044=ATTR1.x*skinBones[_Indices0044.x];_skinVectorY0044=ATTR1.x*skinBones[(_Indices0044.x+1)];_skinVectorZ0044=ATTR1.x*skinBones[(_Indices0044.x+2)];_skinVectorX0044=_skinVectorX0044+ATTR1.y*skinBones[_Indices0044.y];_skinVectorY0044=_skinVectorY0044+ATTR1.y*skinBones[(_Indices0044.y+1)];_skinVectorZ0044=_skinVectorZ0044+ATTR1.y*skinBones[(_Indices0044.y+2)];_skinVectorX0044=_skinVectorX0044+ATTR1.z*skinBones[_Indices0044.z];_skinVectorY0044=_skinVectorY0044+ATTR1.z*skinBones[(_Indices0044.z+1)];_skinVectorZ0044=_skinVectorZ0044+ATTR1.z*skinBones[(_Indices0044.z+2)];_skinVectorX0044=_skinVectorX0044+ATTR1.w*skinBones[_Indices0044.w];_skinVectorY0044=_skinVectorY0044+ATTR1.w*skinBones[(_Indices0044.w+1)];_skinVectorZ0044=_skinVectorZ0044+ATTR1.w*skinBones[(_Indices0044.w+2)];_skinTempPosition=vec4(ATTR0.x,ATTR0.y,ATTR0.z,1.0);_Position.x=dot(_skinTempPosition,_skinVectorX0044);_Position.y=dot(_skinTempPosition,_skinVectorY0044);_Position.z=dot(_skinTempPosition,_skinVectorZ0044);_Normal.x=dot(ATTR2,_skinVectorX0044.xyz);_Normal.y=dot(ATTR2,_skinVectorY0044.xyz);_Normal.z=dot(ATTR2,_skinVectorZ0044.xyz);_TMP1=dot(_Normal,_Normal);_TMP2=inversesqrt(_TMP1);_Normal=_TMP2*_Normal;_viewPosition1=_Position.xxx*worldView[0]+_Position.yyy*worldView[1]+_Position.zzz*worldView[2]+worldView[3];_viewNormal=_Normal.xxx*worldViewInverseTranspose[0]+_Normal.yyy*worldViewInverseTranspose[1]+_Normal.zzz*worldViewInverseTranspose[2];_OUTPosition1=_viewPosition1.xxxx*projection[0]+_viewPosition1.yyyy*projection[1]+_viewPosition1.zzzz*projection[2]+projection[3];_TMP3=dot(lightDirection,_viewNormal);_d0070=-_TMP3;if(0.0<_d0070){_color0070=materialColor.xyz*(lightColor+ambientColor);}else{_color0070=materialColor.xyz*ambientColor;}\n_a0074=vec4(_viewPosition1.x,_viewPosition1.y,_viewPosition1.z,1.0);_worldPositionY0070=dot(_a0074,viewInverseTranspose[1]);_x0076=(-_viewPosition1.z-_worldPositionY0070)*invCameraFar;_TMP6=min(1.0,_x0076);_TMP77=max(0.0,_TMP6);_TMP5=inversesqrt(_TMP77);_fogFactor0070=1.0/_TMP5;_TMP69=_color0070+_fogFactor0070*(fogColor-_color0070);_OUTColor1=vec4(_TMP69.x,_TMP69.y,_TMP69.z,materialColor.w);_OUTUV1=ATTR8.xx*uvTransform[0]+ATTR8.yy*uvTransform[1]+uvTransform[2];tz_TexCoord[0].xy=_OUTUV1;tz_Color=_OUTColor1;gl_Position=_OUTPosition1;}"},"vp_lambert":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying TZ_LOWP vec4 tz_Color;varying vec4 tz_TexCoord[1];attribute vec4 ATTR0;attribute vec3 ATTR2;attribute vec4 ATTR8;\nvec4 _OUTPosition1;vec4 _OUTColor1;vec2 _OUTUV1;float _TMP3;float _TMP4;float _TMP1;vec3 _TMP47;float _d0048;vec3 _color0048;float _worldPositionY0048;float _fogFactor0048;vec4 _a0052;float _x0054;float _TMP55;uniform vec2 uvTransform[3];uniform vec4 projection[4];uniform vec3 worldView[4];uniform vec3 worldViewInverseTranspose[3];uniform vec4 viewInverseTranspose[3];uniform vec3 lightDirection;uniform vec3 lightColor;uniform vec3 ambientColor;uniform vec3 fogColor;uniform float invCameraFar;uniform vec4 materialColor;void main()\n{vec3 _viewPosition1;vec3 _viewNormal;_viewPosition1=ATTR0.xxx*worldView[0]+ATTR0.yyy*worldView[1]+ATTR0.zzz*worldView[2]+worldView[3];_viewNormal=ATTR2.xxx*worldViewInverseTranspose[0]+ATTR2.yyy*worldViewInverseTranspose[1]+ATTR2.zzz*worldViewInverseTranspose[2];_OUTPosition1=_viewPosition1.xxxx*projection[0]+_viewPosition1.yyyy*projection[1]+_viewPosition1.zzzz*projection[2]+projection[3];_TMP1=dot(lightDirection,_viewNormal);_d0048=-_TMP1;if(0.0<_d0048){_color0048=materialColor.xyz*(lightColor+ambientColor);}else{_color0048=materialColor.xyz*ambientColor;}\n_a0052=vec4(_viewPosition1.x,_viewPosition1.y,_viewPosition1.z,1.0);_worldPositionY0048=dot(_a0052,viewInverseTranspose[1]);_x0054=(-_viewPosition1.z-_worldPositionY0048)*invCameraFar;_TMP4=min(1.0,_x0054);_TMP55=max(0.0,_TMP4);_TMP3=inversesqrt(_TMP55);_fogFactor0048=1.0/_TMP3;_TMP47=_color0048+_fogFactor0048*(fogColor-_color0048);_OUTColor1=vec4(_TMP47.x,_TMP47.y,_TMP47.z,materialColor.w);_OUTUV1=ATTR8.xx*uvTransform[0]+ATTR8.yy*uvTransform[1]+uvTransform[2];tz_TexCoord[0].xy=_OUTUV1;tz_Color=_OUTColor1;gl_Position=_OUTPosition1;}"},"fp_flat_nolight":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nuniform vec4 materialColor;void main()\n{gl_FragColor=materialColor;}"},"vp_flat_nolight_skinned":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nattribute vec4 ATTR0;\nvec4 _OUTPosition1;ivec4 _Indices0036;vec4 _skinMatrix0036[3];attribute vec4 ATTR7;attribute vec4 ATTR1;uniform vec4 skinBones[228];uniform vec4 projection[4];uniform vec3 worldView[4];void main()\n{vec4 _skinTempPosition;vec3 _Position;vec3 _viewPosition;_Indices0036=ivec4(int((3.0*ATTR7).x),int((3.0*ATTR7).y),int((3.0*ATTR7).z),int((3.0*ATTR7).w));_skinMatrix0036[0]=ATTR1.x*skinBones[_Indices0036.x];_skinMatrix0036[1]=ATTR1.x*skinBones[(_Indices0036.x+1)];_skinMatrix0036[2]=ATTR1.x*skinBones[(_Indices0036.x+2)];_skinMatrix0036[0]=_skinMatrix0036[0]+ATTR1.y*skinBones[_Indices0036.y];_skinMatrix0036[1]=_skinMatrix0036[1]+ATTR1.y*skinBones[(_Indices0036.y+1)];_skinMatrix0036[2]=_skinMatrix0036[2]+ATTR1.y*skinBones[(_Indices0036.y+2)];_skinMatrix0036[0]=_skinMatrix0036[0]+ATTR1.z*skinBones[_Indices0036.z];_skinMatrix0036[1]=_skinMatrix0036[1]+ATTR1.z*skinBones[(_Indices0036.z+1)];_skinMatrix0036[2]=_skinMatrix0036[2]+ATTR1.z*skinBones[(_Indices0036.z+2)];_skinMatrix0036[0]=_skinMatrix0036[0]+ATTR1.w*skinBones[_Indices0036.w];_skinMatrix0036[1]=_skinMatrix0036[1]+ATTR1.w*skinBones[(_Indices0036.w+1)];_skinMatrix0036[2]=_skinMatrix0036[2]+ATTR1.w*skinBones[(_Indices0036.w+2)];_skinTempPosition=vec4(ATTR0.x,ATTR0.y,ATTR0.z,1.0);_Position.x=dot(_skinTempPosition,_skinMatrix0036[0]);_Position.y=dot(_skinTempPosition,_skinMatrix0036[1]);_Position.z=dot(_skinTempPosition,_skinMatrix0036[2]);_viewPosition=_Position.xxx*worldView[0]+_Position.yyy*worldView[1]+_Position.zzz*worldView[2]+worldView[3];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];gl_Position=_OUTPosition1;}"},"vp_flat_nolight":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nattribute vec4 ATTR0;\nvec4 _OUTPosition1;uniform vec4 projection[4];uniform vec3 worldView[4];void main()\n{vec3 _viewPosition;_viewPosition=ATTR0.xxx*worldView[0]+ATTR0.yyy*worldView[1]+ATTR0.zzz*worldView[2]+worldView[3];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];gl_Position=_OUTPosition1;}"},"fp_flat_nocull":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[2];\nvec4 _ret_0;float _TMP0;float _TMP31;float _TMP35;float _TMP8;vec4 _TMP29;float _TMP33;vec4 _TMP27;vec4 _TMP25;vec4 _TMP23;vec4 _TMP21;float _TMP20;float _TMP18;float _TMP32;float _TMP17;float _TMP16;float _TMP15;float _TMP14;float _TMP13;float _TMP12;float _TMP11;float _TMP10;float _TMP7;float _TMP5;float _TMP3;float _TMP2;float _TMP4;vec3 _TMP79;float _d0080;vec3 _Vn10080;vec3 _Hn10080;float _s10080;vec3 _specular10080;vec3 _color0080;float _shadowAttenuation20080;float _worldPositionY10080;float _fogFactor10080;float _TMP85;vec4 _viewPositionH0086;float _shadowSpaceLimit0086;float _shadowSpaceX0086;float _shadowSpaceY0086;vec4 _shadowDepth0086;vec2 _shadowOffset0086;vec2 _shadowuv0086;float _depth0086;bool _TMP87;float _TMP128;float _TMP138;float _TMP144;vec2 _c0151;float _TMP152;float _TMP158;vec2 _c0165;float _TMP166;float _TMP172;vec2 _c0179;float _TMP180;float _TMP186;vec2 _c0193;float _TMP194;float _TMP200;vec3 _v0207;vec3 _v0213;float _TMP222;float _TMP230;vec4 _viewPositionH0231;float _shadowSpaceLimit0231;float _shadowSpaceX0231;float _shadowSpaceY0231;vec4 _shadowDepth0231;vec2 _shadowOffset0231;vec2 _shadowuv0231;float _depth0231;bool _TMP232;float _TMP273;float _TMP283;float _TMP289;vec2 _c0296;float _TMP297;float _TMP303;vec2 _c0310;float _TMP311;float _TMP317;vec2 _c0324;float _TMP325;float _TMP331;vec2 _c0338;float _TMP339;float _TMP345;vec4 _a0356;float _x0358;float _TMP359;uniform vec4 viewShadowProjection0[3];uniform vec2 shadowOffset0;uniform vec4 viewShadowProjection1[3];uniform vec2 shadowOffset1;uniform vec4 viewShadowProjection2[3];uniform vec2 shadowOffset2;uniform vec4 viewShadowProjection3[3];uniform vec2 shadowOffset3;uniform float invShadowSize;uniform sampler2D shadowMapTexture;uniform vec4 viewInverseTranspose[3];uniform vec3 lightDirection;uniform vec3 lightColor;uniform vec3 ambientColor;uniform vec3 fogColor;uniform float invCameraFar;uniform vec4 materialColor;uniform vec3 foregroundAlbedoScale;uniform bool foreground;void main()\n{vec3 _Nn1;_TMP2=dot(tz_TexCoord[0].xyz,tz_TexCoord[0].xyz);_TMP3=inversesqrt(_TMP2);_Nn1=_TMP3*tz_TexCoord[0].xyz;if(foreground){_TMP0=materialColor.w;}else{_TMP0=0.0;}\n_TMP4=dot(lightDirection,_Nn1);_d0080=abs(_TMP4);if(foreground){if(0.0<_d0080){_TMP87=true;_viewPositionH0086=vec4(tz_TexCoord[1].x,tz_TexCoord[1].y,tz_TexCoord[1].z,1.0);_shadowSpaceLimit0086=1.0-invShadowSize;_shadowSpaceX0086=dot(_viewPositionH0086,viewShadowProjection0[0]);_shadowSpaceY0086=dot(_viewPositionH0086,viewShadowProjection0[1]);_TMP10=abs(_shadowSpaceX0086);_TMP11=abs(_shadowSpaceY0086);if(_TMP10<_shadowSpaceLimit0086&&_TMP11<_shadowSpaceLimit0086){_shadowDepth0086=viewShadowProjection0[2];_shadowOffset0086=shadowOffset0;}else{_shadowSpaceX0086=dot(_viewPositionH0086,viewShadowProjection1[0]);_shadowSpaceY0086=dot(_viewPositionH0086,viewShadowProjection1[1]);_TMP12=abs(_shadowSpaceX0086);_TMP13=abs(_shadowSpaceY0086);if(_TMP12<_shadowSpaceLimit0086&&_TMP13<_shadowSpaceLimit0086){_shadowDepth0086=viewShadowProjection1[2];_shadowOffset0086=shadowOffset1;}else{_shadowSpaceX0086=dot(_viewPositionH0086,viewShadowProjection2[0]);_shadowSpaceY0086=dot(_viewPositionH0086,viewShadowProjection2[1]);_TMP14=abs(_shadowSpaceX0086);_TMP15=abs(_shadowSpaceY0086);if(_TMP14<_shadowSpaceLimit0086&&_TMP15<_shadowSpaceLimit0086){_shadowDepth0086=viewShadowProjection2[2];_shadowOffset0086=shadowOffset2;}else{_shadowSpaceX0086=dot(_viewPositionH0086,viewShadowProjection3[0]);_shadowSpaceY0086=dot(_viewPositionH0086,viewShadowProjection3[1]);_TMP16=abs(_shadowSpaceX0086);_TMP17=abs(_shadowSpaceY0086);if(_TMP16<_shadowSpaceLimit0086&&_TMP17<_shadowSpaceLimit0086){_shadowDepth0086=viewShadowProjection3[2];_shadowOffset0086=shadowOffset3;}else{_TMP85=1.0;_TMP87=false;}}}}\nif(_TMP87){_shadowuv0086=vec2(_shadowSpaceX0086,_shadowSpaceY0086)*2.50000000E-01+_shadowOffset0086.xy;_TMP18=dot(_viewPositionH0086,_shadowDepth0086);_TMP32=dot(vec3(1.0,1.0,1.0),vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP32);_TMP128=max(0.0,_TMP35);_TMP20=min(_TMP18,_TMP128);_depth0086=_TMP20+-4.99999989E-03;_TMP21=texture2D(shadowMapTexture,_shadowuv0086);if(_TMP21.w>3.92156886E-03){_TMP33=dot(_TMP21.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP144=max(0.0,_TMP35);_TMP138=float((_TMP144>=_depth0086));}else{_TMP138=1.0;}\n_c0151=_shadowuv0086+vec2(-invShadowSize,0.0);_TMP23=texture2D(shadowMapTexture,_c0151);if(_TMP23.w>3.92156886E-03){_TMP33=dot(_TMP23.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP158=max(0.0,_TMP35);_TMP152=float((_TMP158>=_depth0086));}else{_TMP152=1.0;}\n_c0165=_shadowuv0086+vec2(0.0,-invShadowSize);_TMP25=texture2D(shadowMapTexture,_c0165);if(_TMP25.w>3.92156886E-03){_TMP33=dot(_TMP25.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP172=max(0.0,_TMP35);_TMP166=float((_TMP172>=_depth0086));}else{_TMP166=1.0;}\n_c0179=_shadowuv0086+vec2(invShadowSize,0.0);_TMP27=texture2D(shadowMapTexture,_c0179);if(_TMP27.w>3.92156886E-03){_TMP33=dot(_TMP27.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP186=max(0.0,_TMP35);_TMP180=float((_TMP186>=_depth0086));}else{_TMP180=1.0;}\n_c0193=_shadowuv0086+vec2(0.0,invShadowSize);_TMP29=texture2D(shadowMapTexture,_c0193);if(_TMP29.w>3.92156886E-03){_TMP33=dot(_TMP29.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP200=max(0.0,_TMP35);_TMP194=float((_TMP200>=_depth0086));}else{_TMP194=1.0;}\n_TMP85=(_TMP138+_TMP152+_TMP166+_TMP180+_TMP194)*2.00000003E-01;}\nif(_TMP85>4.00000006E-01){_v0207=-tz_TexCoord[1].xyz;_TMP2=dot(_v0207,_v0207);_TMP3=inversesqrt(_TMP2);_Vn10080=_TMP3*_v0207;_v0213=_Vn10080-lightDirection;_TMP2=dot(_v0213,_v0213);_TMP3=inversesqrt(_TMP2);_Hn10080=_TMP3*_v0213;_TMP5=dot(_Hn10080,_Nn1);_TMP35=min(1.0,_TMP5);_TMP222=max(0.0,_TMP35);_s10080=pow(_TMP222,32.0);if(_s10080>7.50000000E-01){_TMP7=0.5;}else{_TMP7=0.0;}\n_specular10080=_TMP7*lightColor;_color0080=_specular10080+materialColor.xyz*foregroundAlbedoScale.x;}else{_color0080=materialColor.xyz*foregroundAlbedoScale.y;}}else{_color0080=materialColor.xyz*foregroundAlbedoScale.z;}\n_TMP79=_color0080;}else{if(0.0<_d0080){_TMP232=true;_viewPositionH0231=vec4(tz_TexCoord[1].x,tz_TexCoord[1].y,tz_TexCoord[1].z,1.0);_shadowSpaceLimit0231=1.0-invShadowSize;_shadowSpaceX0231=dot(_viewPositionH0231,viewShadowProjection0[0]);_shadowSpaceY0231=dot(_viewPositionH0231,viewShadowProjection0[1]);_TMP10=abs(_shadowSpaceX0231);_TMP11=abs(_shadowSpaceY0231);if(_TMP10<_shadowSpaceLimit0231&&_TMP11<_shadowSpaceLimit0231){_shadowDepth0231=viewShadowProjection0[2];_shadowOffset0231=shadowOffset0;}else{_shadowSpaceX0231=dot(_viewPositionH0231,viewShadowProjection1[0]);_shadowSpaceY0231=dot(_viewPositionH0231,viewShadowProjection1[1]);_TMP12=abs(_shadowSpaceX0231);_TMP13=abs(_shadowSpaceY0231);if(_TMP12<_shadowSpaceLimit0231&&_TMP13<_shadowSpaceLimit0231){_shadowDepth0231=viewShadowProjection1[2];_shadowOffset0231=shadowOffset1;}else{_shadowSpaceX0231=dot(_viewPositionH0231,viewShadowProjection2[0]);_shadowSpaceY0231=dot(_viewPositionH0231,viewShadowProjection2[1]);_TMP14=abs(_shadowSpaceX0231);_TMP15=abs(_shadowSpaceY0231);if(_TMP14<_shadowSpaceLimit0231&&_TMP15<_shadowSpaceLimit0231){_shadowDepth0231=viewShadowProjection2[2];_shadowOffset0231=shadowOffset2;}else{_shadowSpaceX0231=dot(_viewPositionH0231,viewShadowProjection3[0]);_shadowSpaceY0231=dot(_viewPositionH0231,viewShadowProjection3[1]);_TMP16=abs(_shadowSpaceX0231);_TMP17=abs(_shadowSpaceY0231);if(_TMP16<_shadowSpaceLimit0231&&_TMP17<_shadowSpaceLimit0231){_shadowDepth0231=viewShadowProjection3[2];_shadowOffset0231=shadowOffset3;}else{_TMP230=1.0;_TMP232=false;}}}}\nif(_TMP232){_shadowuv0231=vec2(_shadowSpaceX0231,_shadowSpaceY0231)*2.50000000E-01+_shadowOffset0231.xy;_TMP18=dot(_viewPositionH0231,_shadowDepth0231);_TMP32=dot(vec3(1.0,1.0,1.0),vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP32);_TMP273=max(0.0,_TMP35);_TMP20=min(_TMP18,_TMP273);_depth0231=_TMP20+-4.99999989E-03;_TMP21=texture2D(shadowMapTexture,_shadowuv0231);if(_TMP21.w>3.92156886E-03){_TMP33=dot(_TMP21.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP289=max(0.0,_TMP35);_TMP283=float((_TMP289>=_depth0231));}else{_TMP283=1.0;}\n_c0296=_shadowuv0231+vec2(-invShadowSize,0.0);_TMP23=texture2D(shadowMapTexture,_c0296);if(_TMP23.w>3.92156886E-03){_TMP33=dot(_TMP23.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP303=max(0.0,_TMP35);_TMP297=float((_TMP303>=_depth0231));}else{_TMP297=1.0;}\n_c0310=_shadowuv0231+vec2(0.0,-invShadowSize);_TMP25=texture2D(shadowMapTexture,_c0310);if(_TMP25.w>3.92156886E-03){_TMP33=dot(_TMP25.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP317=max(0.0,_TMP35);_TMP311=float((_TMP317>=_depth0231));}else{_TMP311=1.0;}\n_c0324=_shadowuv0231+vec2(invShadowSize,0.0);_TMP27=texture2D(shadowMapTexture,_c0324);if(_TMP27.w>3.92156886E-03){_TMP33=dot(_TMP27.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP331=max(0.0,_TMP35);_TMP325=float((_TMP331>=_depth0231));}else{_TMP325=1.0;}\n_c0338=_shadowuv0231+vec2(0.0,invShadowSize);_TMP29=texture2D(shadowMapTexture,_c0338);if(_TMP29.w>3.92156886E-03){_TMP33=dot(_TMP29.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP345=max(0.0,_TMP35);_TMP339=float((_TMP345>=_depth0231));}else{_TMP339=1.0;}\n_TMP230=(_TMP283+_TMP297+_TMP311+_TMP325+_TMP339)*2.00000003E-01;}\n_shadowAttenuation20080=_TMP230*0.5+0.5;_TMP31=inversesqrt(_d0080);_TMP8=1.0/_TMP31;_color0080=materialColor.xyz*((_TMP8*_shadowAttenuation20080)*lightColor+ambientColor);}else{_color0080=materialColor.xyz*ambientColor;}\n_a0356=vec4(tz_TexCoord[1].x,tz_TexCoord[1].y,tz_TexCoord[1].z,1.0);_worldPositionY10080=dot(_a0356,viewInverseTranspose[1]);_x0358=(-tz_TexCoord[1].z-_worldPositionY10080)*invCameraFar;_TMP35=min(1.0,_x0358);_TMP359=max(0.0,_TMP35);_TMP31=inversesqrt(_TMP359);_fogFactor10080=1.0/_TMP31;_TMP79=_color0080+_fogFactor10080*(fogColor-_color0080);}\n_ret_0=vec4(_TMP79.x,_TMP79.y,_TMP79.z,_TMP0);gl_FragColor=_ret_0;}"},"vp_flat_skinned":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[2];attribute vec4 ATTR0;attribute vec3 ATTR2;\nvec4 _OUTPosition1;vec3 _OUTViewPosition1;vec3 _OUTViewNormal1;float _TMP1;float _TMP0;ivec4 _Indices0037;vec4 _skinVectorX0037;vec4 _skinVectorY0037;vec4 _skinVectorZ0037;attribute vec4 ATTR7;attribute vec4 ATTR1;uniform vec4 skinBones[228];uniform vec4 projection[4];uniform vec3 worldView[4];uniform vec3 worldViewInverseTranspose[3];void main()\n{vec4 _skinTempPosition;vec3 _Position;vec3 _Normal;vec3 _viewPosition;vec3 _viewNormal;_Indices0037=ivec4(int((3.0*ATTR7).x),int((3.0*ATTR7).y),int((3.0*ATTR7).z),int((3.0*ATTR7).w));_skinVectorX0037=ATTR1.x*skinBones[_Indices0037.x];_skinVectorY0037=ATTR1.x*skinBones[(_Indices0037.x+1)];_skinVectorZ0037=ATTR1.x*skinBones[(_Indices0037.x+2)];_skinVectorX0037=_skinVectorX0037+ATTR1.y*skinBones[_Indices0037.y];_skinVectorY0037=_skinVectorY0037+ATTR1.y*skinBones[(_Indices0037.y+1)];_skinVectorZ0037=_skinVectorZ0037+ATTR1.y*skinBones[(_Indices0037.y+2)];_skinVectorX0037=_skinVectorX0037+ATTR1.z*skinBones[_Indices0037.z];_skinVectorY0037=_skinVectorY0037+ATTR1.z*skinBones[(_Indices0037.z+1)];_skinVectorZ0037=_skinVectorZ0037+ATTR1.z*skinBones[(_Indices0037.z+2)];_skinVectorX0037=_skinVectorX0037+ATTR1.w*skinBones[_Indices0037.w];_skinVectorY0037=_skinVectorY0037+ATTR1.w*skinBones[(_Indices0037.w+1)];_skinVectorZ0037=_skinVectorZ0037+ATTR1.w*skinBones[(_Indices0037.w+2)];_skinTempPosition=vec4(ATTR0.x,ATTR0.y,ATTR0.z,1.0);_Position.x=dot(_skinTempPosition,_skinVectorX0037);_Position.y=dot(_skinTempPosition,_skinVectorY0037);_Position.z=dot(_skinTempPosition,_skinVectorZ0037);_Normal.x=dot(ATTR2,_skinVectorX0037.xyz);_Normal.y=dot(ATTR2,_skinVectorY0037.xyz);_Normal.z=dot(ATTR2,_skinVectorZ0037.xyz);_TMP0=dot(_Normal,_Normal);_TMP1=inversesqrt(_TMP0);_Normal=_TMP1*_Normal;_viewPosition=_Position.xxx*worldView[0]+_Position.yyy*worldView[1]+_Position.zzz*worldView[2]+worldView[3];_viewNormal=_Normal.xxx*worldViewInverseTranspose[0]+_Normal.yyy*worldViewInverseTranspose[1]+_Normal.zzz*worldViewInverseTranspose[2];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];_OUTViewNormal1=_viewNormal;_OUTViewPosition1=_viewPosition;tz_TexCoord[0].xyz=_viewNormal;tz_TexCoord[1].xyz=_viewPosition;gl_Position=_OUTPosition1;}"},"vp_flat":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[2];attribute vec4 ATTR0;attribute vec3 ATTR2;\nvec4 _OUTPosition1;vec3 _OUTViewPosition1;vec3 _OUTViewNormal1;uniform vec4 projection[4];uniform vec3 worldView[4];uniform vec3 worldViewInverseTranspose[3];void main()\n{vec3 _viewPosition;vec3 _viewNormal;_viewPosition=ATTR0.xxx*worldView[0]+ATTR0.yyy*worldView[1]+ATTR0.zzz*worldView[2]+worldView[3];_viewNormal=ATTR2.xxx*worldViewInverseTranspose[0]+ATTR2.yyy*worldViewInverseTranspose[1]+ATTR2.zzz*worldViewInverseTranspose[2];_OUTPosition1=_viewPosition.xxxx*projection[0]+_viewPosition.yyyy*projection[1]+_viewPosition.zzzz*projection[2]+projection[3];_OUTViewNormal1=_viewNormal;_OUTViewPosition1=_viewPosition;tz_TexCoord[0].xyz=_viewNormal;tz_TexCoord[1].xyz=_viewPosition;gl_Position=_OUTPosition1;}"},"fp_flat":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying vec4 tz_TexCoord[2];\nvec4 _ret_0;float _TMP0;float _TMP31;float _TMP35;float _TMP8;vec4 _TMP29;float _TMP33;vec4 _TMP27;vec4 _TMP25;vec4 _TMP23;vec4 _TMP21;float _TMP20;float _TMP18;float _TMP32;float _TMP17;float _TMP16;float _TMP15;float _TMP14;float _TMP13;float _TMP12;float _TMP11;float _TMP10;float _TMP7;float _TMP5;float _TMP3;float _TMP2;float _TMP4;vec3 _TMP79;float _d0080;vec3 _Vn10080;vec3 _Hn10080;float _s10080;vec3 _specular10080;vec3 _color0080;float _shadowAttenuation20080;float _worldPositionY10080;float _fogFactor10080;float _TMP83;vec4 _viewPositionH0084;float _shadowSpaceLimit0084;float _shadowSpaceX0084;float _shadowSpaceY0084;vec4 _shadowDepth0084;vec2 _shadowOffset0084;vec2 _shadowuv0084;float _depth0084;bool _TMP85;float _TMP126;float _TMP136;float _TMP142;vec2 _c0149;float _TMP150;float _TMP156;vec2 _c0163;float _TMP164;float _TMP170;vec2 _c0177;float _TMP178;float _TMP184;vec2 _c0191;float _TMP192;float _TMP198;vec3 _v0205;vec3 _v0211;float _TMP220;float _TMP228;vec4 _viewPositionH0229;float _shadowSpaceLimit0229;float _shadowSpaceX0229;float _shadowSpaceY0229;vec4 _shadowDepth0229;vec2 _shadowOffset0229;vec2 _shadowuv0229;float _depth0229;bool _TMP230;float _TMP271;float _TMP281;float _TMP287;vec2 _c0294;float _TMP295;float _TMP301;vec2 _c0308;float _TMP309;float _TMP315;vec2 _c0322;float _TMP323;float _TMP329;vec2 _c0336;float _TMP337;float _TMP343;vec4 _a0354;float _x0356;float _TMP357;uniform vec4 viewShadowProjection0[3];uniform vec2 shadowOffset0;uniform vec4 viewShadowProjection1[3];uniform vec2 shadowOffset1;uniform vec4 viewShadowProjection2[3];uniform vec2 shadowOffset2;uniform vec4 viewShadowProjection3[3];uniform vec2 shadowOffset3;uniform float invShadowSize;uniform sampler2D shadowMapTexture;uniform vec4 viewInverseTranspose[3];uniform vec3 lightDirection;uniform vec3 lightColor;uniform vec3 ambientColor;uniform vec3 fogColor;uniform float invCameraFar;uniform vec4 materialColor;uniform vec3 foregroundAlbedoScale;uniform bool foreground;void main()\n{vec3 _Nn1;_TMP2=dot(tz_TexCoord[0].xyz,tz_TexCoord[0].xyz);_TMP3=inversesqrt(_TMP2);_Nn1=_TMP3*tz_TexCoord[0].xyz;if(foreground){_TMP0=materialColor.w;}else{_TMP0=0.0;}\n_TMP4=dot(lightDirection,_Nn1);_d0080=-_TMP4;if(foreground){if(0.0<_d0080){_TMP85=true;_viewPositionH0084=vec4(tz_TexCoord[1].x,tz_TexCoord[1].y,tz_TexCoord[1].z,1.0);_shadowSpaceLimit0084=1.0-invShadowSize;_shadowSpaceX0084=dot(_viewPositionH0084,viewShadowProjection0[0]);_shadowSpaceY0084=dot(_viewPositionH0084,viewShadowProjection0[1]);_TMP10=abs(_shadowSpaceX0084);_TMP11=abs(_shadowSpaceY0084);if(_TMP10<_shadowSpaceLimit0084&&_TMP11<_shadowSpaceLimit0084){_shadowDepth0084=viewShadowProjection0[2];_shadowOffset0084=shadowOffset0;}else{_shadowSpaceX0084=dot(_viewPositionH0084,viewShadowProjection1[0]);_shadowSpaceY0084=dot(_viewPositionH0084,viewShadowProjection1[1]);_TMP12=abs(_shadowSpaceX0084);_TMP13=abs(_shadowSpaceY0084);if(_TMP12<_shadowSpaceLimit0084&&_TMP13<_shadowSpaceLimit0084){_shadowDepth0084=viewShadowProjection1[2];_shadowOffset0084=shadowOffset1;}else{_shadowSpaceX0084=dot(_viewPositionH0084,viewShadowProjection2[0]);_shadowSpaceY0084=dot(_viewPositionH0084,viewShadowProjection2[1]);_TMP14=abs(_shadowSpaceX0084);_TMP15=abs(_shadowSpaceY0084);if(_TMP14<_shadowSpaceLimit0084&&_TMP15<_shadowSpaceLimit0084){_shadowDepth0084=viewShadowProjection2[2];_shadowOffset0084=shadowOffset2;}else{_shadowSpaceX0084=dot(_viewPositionH0084,viewShadowProjection3[0]);_shadowSpaceY0084=dot(_viewPositionH0084,viewShadowProjection3[1]);_TMP16=abs(_shadowSpaceX0084);_TMP17=abs(_shadowSpaceY0084);if(_TMP16<_shadowSpaceLimit0084&&_TMP17<_shadowSpaceLimit0084){_shadowDepth0084=viewShadowProjection3[2];_shadowOffset0084=shadowOffset3;}else{_TMP83=1.0;_TMP85=false;}}}}\nif(_TMP85){_shadowuv0084=vec2(_shadowSpaceX0084,_shadowSpaceY0084)*2.50000000E-01+_shadowOffset0084.xy;_TMP18=dot(_viewPositionH0084,_shadowDepth0084);_TMP32=dot(vec3(1.0,1.0,1.0),vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP32);_TMP126=max(0.0,_TMP35);_TMP20=min(_TMP18,_TMP126);_depth0084=_TMP20+-4.99999989E-03;_TMP21=texture2D(shadowMapTexture,_shadowuv0084);if(_TMP21.w>3.92156886E-03){_TMP33=dot(_TMP21.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP142=max(0.0,_TMP35);_TMP136=float((_TMP142>=_depth0084));}else{_TMP136=1.0;}\n_c0149=_shadowuv0084+vec2(-invShadowSize,0.0);_TMP23=texture2D(shadowMapTexture,_c0149);if(_TMP23.w>3.92156886E-03){_TMP33=dot(_TMP23.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP156=max(0.0,_TMP35);_TMP150=float((_TMP156>=_depth0084));}else{_TMP150=1.0;}\n_c0163=_shadowuv0084+vec2(0.0,-invShadowSize);_TMP25=texture2D(shadowMapTexture,_c0163);if(_TMP25.w>3.92156886E-03){_TMP33=dot(_TMP25.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP170=max(0.0,_TMP35);_TMP164=float((_TMP170>=_depth0084));}else{_TMP164=1.0;}\n_c0177=_shadowuv0084+vec2(invShadowSize,0.0);_TMP27=texture2D(shadowMapTexture,_c0177);if(_TMP27.w>3.92156886E-03){_TMP33=dot(_TMP27.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP184=max(0.0,_TMP35);_TMP178=float((_TMP184>=_depth0084));}else{_TMP178=1.0;}\n_c0191=_shadowuv0084+vec2(0.0,invShadowSize);_TMP29=texture2D(shadowMapTexture,_c0191);if(_TMP29.w>3.92156886E-03){_TMP33=dot(_TMP29.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP198=max(0.0,_TMP35);_TMP192=float((_TMP198>=_depth0084));}else{_TMP192=1.0;}\n_TMP83=(_TMP136+_TMP150+_TMP164+_TMP178+_TMP192)*2.00000003E-01;}\nif(_TMP83>4.00000006E-01){_v0205=-tz_TexCoord[1].xyz;_TMP2=dot(_v0205,_v0205);_TMP3=inversesqrt(_TMP2);_Vn10080=_TMP3*_v0205;_v0211=_Vn10080-lightDirection;_TMP2=dot(_v0211,_v0211);_TMP3=inversesqrt(_TMP2);_Hn10080=_TMP3*_v0211;_TMP5=dot(_Hn10080,_Nn1);_TMP35=min(1.0,_TMP5);_TMP220=max(0.0,_TMP35);_s10080=pow(_TMP220,32.0);if(_s10080>7.50000000E-01){_TMP7=0.5;}else{_TMP7=0.0;}\n_specular10080=_TMP7*lightColor;_color0080=_specular10080+materialColor.xyz*foregroundAlbedoScale.x;}else{_color0080=materialColor.xyz*foregroundAlbedoScale.y;}}else{_color0080=materialColor.xyz*foregroundAlbedoScale.z;}\n_TMP79=_color0080;}else{if(0.0<_d0080){_TMP230=true;_viewPositionH0229=vec4(tz_TexCoord[1].x,tz_TexCoord[1].y,tz_TexCoord[1].z,1.0);_shadowSpaceLimit0229=1.0-invShadowSize;_shadowSpaceX0229=dot(_viewPositionH0229,viewShadowProjection0[0]);_shadowSpaceY0229=dot(_viewPositionH0229,viewShadowProjection0[1]);_TMP10=abs(_shadowSpaceX0229);_TMP11=abs(_shadowSpaceY0229);if(_TMP10<_shadowSpaceLimit0229&&_TMP11<_shadowSpaceLimit0229){_shadowDepth0229=viewShadowProjection0[2];_shadowOffset0229=shadowOffset0;}else{_shadowSpaceX0229=dot(_viewPositionH0229,viewShadowProjection1[0]);_shadowSpaceY0229=dot(_viewPositionH0229,viewShadowProjection1[1]);_TMP12=abs(_shadowSpaceX0229);_TMP13=abs(_shadowSpaceY0229);if(_TMP12<_shadowSpaceLimit0229&&_TMP13<_shadowSpaceLimit0229){_shadowDepth0229=viewShadowProjection1[2];_shadowOffset0229=shadowOffset1;}else{_shadowSpaceX0229=dot(_viewPositionH0229,viewShadowProjection2[0]);_shadowSpaceY0229=dot(_viewPositionH0229,viewShadowProjection2[1]);_TMP14=abs(_shadowSpaceX0229);_TMP15=abs(_shadowSpaceY0229);if(_TMP14<_shadowSpaceLimit0229&&_TMP15<_shadowSpaceLimit0229){_shadowDepth0229=viewShadowProjection2[2];_shadowOffset0229=shadowOffset2;}else{_shadowSpaceX0229=dot(_viewPositionH0229,viewShadowProjection3[0]);_shadowSpaceY0229=dot(_viewPositionH0229,viewShadowProjection3[1]);_TMP16=abs(_shadowSpaceX0229);_TMP17=abs(_shadowSpaceY0229);if(_TMP16<_shadowSpaceLimit0229&&_TMP17<_shadowSpaceLimit0229){_shadowDepth0229=viewShadowProjection3[2];_shadowOffset0229=shadowOffset3;}else{_TMP228=1.0;_TMP230=false;}}}}\nif(_TMP230){_shadowuv0229=vec2(_shadowSpaceX0229,_shadowSpaceY0229)*2.50000000E-01+_shadowOffset0229.xy;_TMP18=dot(_viewPositionH0229,_shadowDepth0229);_TMP32=dot(vec3(1.0,1.0,1.0),vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP32);_TMP271=max(0.0,_TMP35);_TMP20=min(_TMP18,_TMP271);_depth0229=_TMP20+-4.99999989E-03;_TMP21=texture2D(shadowMapTexture,_shadowuv0229);if(_TMP21.w>3.92156886E-03){_TMP33=dot(_TMP21.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP287=max(0.0,_TMP35);_TMP281=float((_TMP287>=_depth0229));}else{_TMP281=1.0;}\n_c0294=_shadowuv0229+vec2(-invShadowSize,0.0);_TMP23=texture2D(shadowMapTexture,_c0294);if(_TMP23.w>3.92156886E-03){_TMP33=dot(_TMP23.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP301=max(0.0,_TMP35);_TMP295=float((_TMP301>=_depth0229));}else{_TMP295=1.0;}\n_c0308=_shadowuv0229+vec2(0.0,-invShadowSize);_TMP25=texture2D(shadowMapTexture,_c0308);if(_TMP25.w>3.92156886E-03){_TMP33=dot(_TMP25.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP315=max(0.0,_TMP35);_TMP309=float((_TMP315>=_depth0229));}else{_TMP309=1.0;}\n_c0322=_shadowuv0229+vec2(invShadowSize,0.0);_TMP27=texture2D(shadowMapTexture,_c0322);if(_TMP27.w>3.92156886E-03){_TMP33=dot(_TMP27.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP329=max(0.0,_TMP35);_TMP323=float((_TMP329>=_depth0229));}else{_TMP323=1.0;}\n_c0336=_shadowuv0229+vec2(0.0,invShadowSize);_TMP29=texture2D(shadowMapTexture,_c0336);if(_TMP29.w>3.92156886E-03){_TMP33=dot(_TMP29.xyz,vec3(1.51991844E-05,3.89099121E-03,9.96093750E-01));_TMP35=min(1.0,_TMP33);_TMP343=max(0.0,_TMP35);_TMP337=float((_TMP343>=_depth0229));}else{_TMP337=1.0;}\n_TMP228=(_TMP281+_TMP295+_TMP309+_TMP323+_TMP337)*2.00000003E-01;}\n_shadowAttenuation20080=_TMP228*0.5+0.5;_TMP31=inversesqrt(_d0080);_TMP8=1.0/_TMP31;_color0080=materialColor.xyz*((_TMP8*_shadowAttenuation20080)*lightColor+ambientColor);}else{_color0080=materialColor.xyz*ambientColor;}\n_a0354=vec4(tz_TexCoord[1].x,tz_TexCoord[1].y,tz_TexCoord[1].z,1.0);_worldPositionY10080=dot(_a0354,viewInverseTranspose[1]);_x0356=(-tz_TexCoord[1].z-_worldPositionY10080)*invCameraFar;_TMP35=min(1.0,_x0356);_TMP357=max(0.0,_TMP35);_TMP31=inversesqrt(_TMP357);_fogFactor10080=1.0/_TMP31;_TMP79=_color0080+_fogFactor10080*(fogColor-_color0080);}\n_ret_0=vec4(_TMP79.x,_TMP79.y,_TMP79.z,_TMP0);gl_FragColor=_ret_0;}"}}}